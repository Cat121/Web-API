{"version":3,"sources":["views/Integrations/MMCRestrict/Edit.tsx","views/Integrations/MMCRestrict/Icon.tsx","views/Integrations/MMCRestrict/Items.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx"],"names":["default_1","_super","_this","apply","this","arguments","onChange","_b","props","view","name","setState","_a","state","__extends","prototype","render","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","toggle","checked","__webpack_require__","n","__webpack_exports__","ban","color","DataView","Object","__WEBPACK_IMPORTED_MODULE_4__components_DataView__","Items","componentDidMount","requestCatalog","__WEBPACK_IMPORTED_MODULE_6__types__","Item","t","fields","item.name","create","createName","label","required","options","__WEBPACK_IMPORTED_MODULE_5__components_Util__","itemTypes","banReason","edit","usageBanned","__WEBPACK_IMPORTED_MODULE_8__Icon__","__WEBPACK_IMPORTED_MODULE_7__Edit__","breakingBanned","placingBanned","ownershipBanned","dropBanned","craftBanned","worldBanned","canEdit","canDelete","icon","title","createTitle","__WEBPACK_IMPORTED_MODULE_2_react_redux__","api","types","dispatch","type","__WEBPACK_IMPORTED_MODULE_3__actions__","__WEBPACK_IMPORTED_MODULE_1_react_i18next__","DataTable","call","changePage","event","page","preventDefault","onEdit","obj","newData","keys","forEach","__WEBPACK_IMPORTED_MODULE_0_lodash__","bind","doHandleChange","handleChange","__WEBPACK_IMPORTED_MODULE_5__Util__","key","value","__assign","shouldComponentUpdate","nextProps","nextState","list","actions","map","f","filter","maxPage","Math","ceil","length","min","_t","editable","deletable","__WEBPACK_IMPORTED_MODULE_1_react__","style","marginTop","renderHeader","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","striped","stackable","__WEBPACK_IMPORTED_MODULE_7__TableHeader__","hasActions","i18n","__WEBPACK_IMPORTED_MODULE_4__services_i18n__","Body","renderRows","__WEBPACK_IMPORTED_MODULE_6__Pagination__","fitted","listPage","slice","thisRef","changes","i","__WEBPACK_IMPORTED_MODULE_8__TableRow__","idFunc","tableRef","actionable","editing","isEditing","onSave","onDelete","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","Pagination","pagination","renderFirst","renderPrevMore","renderMain","renderNextMore","renderLast","onClick","e","from","max","to","pages","push","p","active","DataTableHeader","Header","Row","renderFields","renderActions","field","HeaderCell","TableRow","onEditEmpty","undefined","j","Cell","collapsing","wide","renderField","renderEdit","__WEBPACK_IMPORTED_MODULE_2__Util__","col","Field","fluid","selection","search","control","placeholder","Input","_canEdit","_canDelete","primary","disabled","updating","loading","secondary","del","negative","endpoint","objId","noDetails","id","data","_state","ownProps","replace","creating","perm","split","perms","permissions","mapStateToProps","requestList","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","expandRef","details","save","endEdit","delete","onCreate","newObj","__WEBPACK_IMPORTED_MODULE_8__Util__","concat","static","interval","setInterval","componentWillUnmount","clearInterval","filterTitle","checks","regsValid","val","func_1","createFields","filterFields","ff","find","filterName","dataVal","filterValue","v","indexOf","RegExp","test","every","check","cols","origActions","DT","createTable","createForm","renderCreateForm","filterForm","renderFilterForm","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_6__DataTable__","checkCreatePerm","createButton","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","CreateForm","handleClick","open","__WEBPACK_IMPORTED_MODULE_4__Util__","canCreate","styled","Title","Content","renderFieldGroups","fieldGroups","newField","isGroup","only","second","first","fg","Group","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","fs","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","content","multiple"],"mappings":"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","file":"static/js/4.b5164743.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { Radio } from 'semantic-ui-react';\r\n\r\nimport { DataTableRef } from '../../../types';\r\n\r\ninterface Props {\r\n\tview: DataTableRef;\r\n\tname: string;\r\n}\r\n\r\nexport default class extends React.Component<Props> {\r\n\tpublic render() {\r\n\t\tconst { view, name } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Radio\r\n\t\t\t\ttoggle\r\n\t\t\t\tname={name}\r\n\t\t\t\tchecked={view.state[name]}\r\n\t\t\t\tonChange={this.onChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onChange = () => {\r\n\t\tconst { view, name } = this.props;\r\n\t\tview.setState({ [name]: !view.state[name] });\r\n\t};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/MMCRestrict/Edit.tsx","import * as React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\n\r\ninterface Props {\r\n\tban: boolean;\r\n}\r\n\r\nexport default ({ ban }: Props) => (\r\n\t<Icon color={ban ? 'red' : 'green'} name={ban ? 'ban' : 'check'} />\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/MMCRestrict/Icon.tsx","import * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\n\r\nimport {\r\n\tAppAction,\r\n\tCatalogRequestAction,\r\n\trequestCatalog\r\n} from '../../../actions';\r\nimport DataViewFunc, { DataViewFields } from '../../../components/DataView';\r\nimport { renderCatalogTypeOptions } from '../../../components/Util';\r\nimport { CatalogType, MMCRestrictItem } from '../../../fetch';\r\nimport { AppState, CatalogTypeKeys } from '../../../types';\r\n\r\nimport Edit from './Edit';\r\nimport Icon from './Icon';\r\n\r\n// tslint:disable-next-line: variable-name\r\nconst DataView = DataViewFunc('mmc-restrict/item', 'item.id');\r\n\r\ninterface Props extends WithTranslation {\r\n\titemTypes: CatalogType[];\r\n\trequestCatalog: (type: string) => CatalogRequestAction;\r\n}\r\n\r\ninterface OwnState {}\r\n\r\nclass Items extends React.Component<Props, OwnState> {\r\n\tpublic componentDidMount() {\r\n\t\tthis.props.requestCatalog(CatalogTypeKeys.Item);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst fields: DataViewFields<MMCRestrictItem> = {\r\n\t\t\t'item.name': {\r\n\t\t\t\tcreate: true,\r\n\t\t\t\tcreateName: 'item.id',\r\n\t\t\t\tlabel: t('Item'),\r\n\t\t\t\trequired: true,\r\n\t\t\t\toptions: renderCatalogTypeOptions(this.props.itemTypes)\r\n\t\t\t},\r\n\t\t\tbanReason: {\r\n\t\t\t\tlabel: t('Reason'),\r\n\t\t\t\tcreate: true,\r\n\t\t\t\tedit: true\r\n\t\t\t},\r\n\t\t\tusageBanned: {\r\n\t\t\t\tlabel: t('Usage'),\r\n\t\t\t\tview: ban => <Icon ban={ban.usageBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"usageBanned\" />\r\n\t\t\t},\r\n\t\t\tbreakingBanned: {\r\n\t\t\t\tlabel: t('Breaking'),\r\n\t\t\t\tview: ban => <Icon ban={ban.breakingBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"breakingBanned\" />\r\n\t\t\t},\r\n\t\t\tplacingBanned: {\r\n\t\t\t\tlabel: t('Placing'),\r\n\t\t\t\tview: ban => <Icon ban={ban.placingBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"placingBanned\" />\r\n\t\t\t},\r\n\t\t\townershipBanned: {\r\n\t\t\t\tlabel: t('Ownership'),\r\n\t\t\t\tview: ban => <Icon ban={ban.ownershipBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"ownershipBanned\" />\r\n\t\t\t},\r\n\t\t\tdropBanned: {\r\n\t\t\t\tlabel: t('Drop'),\r\n\t\t\t\tview: ban => <Icon ban={ban.dropBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"dropBanned\" />\r\n\t\t\t},\r\n\t\t\tcraftBanned: {\r\n\t\t\t\tlabel: t('Craft'),\r\n\t\t\t\tview: ban => <Icon ban={ban.craftBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"craftBanned\" />\r\n\t\t\t},\r\n\t\t\tworldBanned: {\r\n\t\t\t\tlabel: t('World'),\r\n\t\t\t\tview: ban => <Icon ban={ban.worldBanned} />,\r\n\t\t\t\tedit: (ban, view) => <Edit view={view} name=\"worldBanned\" />\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<DataView\r\n\t\t\t\tcanEdit\r\n\t\t\t\tcanDelete\r\n\t\t\t\ticon=\"ban\"\r\n\t\t\t\ttitle={t('RestrictedItems')}\r\n\t\t\t\tcreateTitle={t('CreateRestrictedItem')}\r\n\t\t\t\tfields={fields}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n\treturn {\r\n\t\titemTypes: state.api.types[CatalogTypeKeys.Item]\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\r\n\treturn {\r\n\t\trequestCatalog: (type: string) => dispatch(requestCatalog(type))\r\n\t};\r\n};\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withTranslation('Integrations.MMCRestrict')(Items));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/MMCRestrict/Items.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Header, Icon, SemanticICONS, Table } from 'semantic-ui-react';\r\n\r\nimport i18n from '../../services/i18n';\r\nimport { DataFieldRaw, DataTableRef, IdFunction } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nimport Pagination from './Pagination';\r\nimport TableHeader from './TableHeader';\r\nimport TableRow from './TableRow';\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport type DataTableFields<T> = {\r\n\t[key: string]: DataFieldRaw<T>;\r\n};\r\n\r\nexport interface Props<T> {\r\n\ttitle?: string;\r\n\ticon?: SemanticICONS;\r\n\tlist: T[];\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tfields: DataTableFields<T>;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\tonEdit?: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tidFunc: IdFunction<T>;\r\n\tisEditing: (data: T) => boolean;\r\n}\r\n\r\ninterface AllProps<T> extends Props<T>, WithTranslation {}\r\n\r\ninterface OwnState {\r\n\tpage: number;\r\n\tnewData: any;\r\n}\r\n\r\nclass DataTable<T> extends React.Component<AllProps<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: AllProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.changePage = this.changePage.bind(this);\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate changePage = (event: React.MouseEvent<HTMLElement>, page: number) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\tpage: page\r\n\t\t});\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T | undefined, view: DataTableRef): void => {\r\n\t\tconst newData = {};\r\n\t\tif (obj) {\r\n\t\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\t\tif (!this.props.fields[name].edit) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnewData[name] = _.get(obj, name);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tnewData: newData\r\n\t\t});\r\n\r\n\t\tif (this.props.onEdit) {\r\n\t\t\tthis.props.onEdit(obj, view);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.page !== this.state.page ||\r\n\t\t\tnextState.newData !== this.state.newData\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { list, canEdit, canDelete, actions } = this.props;\r\n\t\tconst fields = Object.keys(this.props.fields)\r\n\t\t\t.map(f => this.props.fields[f])\r\n\t\t\t.filter(f => f.view);\r\n\r\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE);\r\n\t\tconst page = Math.min(this.state.page, maxPage - 1);\r\n\r\n\t\tconst _t = this.props.t;\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ marginTop: '2em' }}>\r\n\t\t\t\t{this.renderHeader()}\r\n\r\n\t\t\t\t<Table striped={true} stackable>\r\n\t\t\t\t\t<TableHeader\r\n\t\t\t\t\t\tfields={fields}\r\n\t\t\t\t\t\thasActions={typeof actions !== typeof undefined}\r\n\t\t\t\t\t\tcanEdit={editable}\r\n\t\t\t\t\t\tcanDelete={deletable}\r\n\t\t\t\t\t\ti18n={i18n}\r\n\t\t\t\t\t\tt={_t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Table.Body>{this.renderRows(fields, page)}</Table.Body>\r\n\t\t\t\t</Table>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tmaxPage={maxPage}\r\n\t\t\t\t\tchangePage={this.changePage}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderHeader() {\r\n\t\tconst { icon, title } = this.props;\r\n\r\n\t\tif (!title) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t<Icon fitted name={icon} /> {title}\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderRows(fields: DataFieldRaw<T>[], page: number) {\r\n\t\tconst { list, canEdit, canDelete, actions, t } = this.props;\r\n\r\n\t\tconst listPage = list.slice(\r\n\t\t\tpage * ITEMS_PER_PAGE,\r\n\t\t\t(page + 1) * ITEMS_PER_PAGE\r\n\t\t);\r\n\r\n\t\tconst thisRef: DataTableRef = {\r\n\t\t\thandleChange: this.handleChange,\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: (changes: object) =>\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewData: { ...this.state.newData, ...changes }\r\n\t\t\t\t})\r\n\t\t};\r\n\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn listPage.map((obj, i) => (\r\n\t\t\t<TableRow\r\n\t\t\t\tkey={this.props.idFunc(obj)}\r\n\t\t\t\tobj={obj}\r\n\t\t\t\ttableRef={thisRef}\r\n\t\t\t\tactionable={editable || deletable}\r\n\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\tcanDelete={canDelete}\r\n\t\t\t\tediting={this.props.isEditing(obj)}\r\n\t\t\t\tfields={fields}\r\n\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\tonSave={this.props.onSave}\r\n\t\t\t\tonDelete={this.props.onDelete}\r\n\t\t\t\tactions={actions}\r\n\t\t\t\tnewData={this.state.newData}\r\n\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\ti18n={i18n}\r\n\t\t\t\tt={t}\r\n\t\t\t/>\r\n\t\t));\r\n\t}\r\n}\r\n\r\nexport default withTranslation('DataTable')(DataTable);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\n\r\nexport interface Props {\r\n\tpage: number;\r\n\tmaxPage: number;\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void;\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\tpublic shouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{this.renderFirst()}\r\n\t\t\t\t{this.renderPrevMore()}\r\n\t\t\t\t{this.renderMain()}\r\n\t\t\t\t{this.renderNextMore()}\r\n\t\t\t\t{this.renderLast()}\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFirst() {\r\n\t\tif (this.props.page <= 4) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\treturn <Menu.Item onClick={e => this.props.changePage(e, 0)}>1</Menu.Item>;\r\n\t}\r\n\r\n\tprivate renderPrevMore() {\r\n\t\tif (this.props.page <= 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page - 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderMain() {\r\n\t\tconst { page, maxPage } = this.props;\r\n\t\tconst from = Math.max(0, page - 4);\r\n\t\tconst to = Math.min(maxPage, page + 5);\r\n\r\n\t\tconst pages = [];\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i);\r\n\t\t}\r\n\r\n\t\treturn pages.map(p => (\r\n\t\t\t<Menu.Item\r\n\t\t\t\tkey={p}\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, p)}\r\n\t\t\t\tactive={p === page}\r\n\t\t\t>\r\n\t\t\t\t{p + 1}\r\n\t\t\t</Menu.Item>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderNextMore() {\r\n\t\tif (this.props.page >= this.props.maxPage - 6) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page + 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderLast() {\r\n\t\tif (this.props.page >= this.props.maxPage - 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu.Item\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, this.props.maxPage - 1)}\r\n\t\t\t>\r\n\t\t\t\t{this.props.maxPage}\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw } from '../../types';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\thasActions: boolean;\r\n\tcanEdit?: boolean;\r\n\tcanDelete?: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields;\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{this.renderFields()}\r\n\t\t\t\t\t{this.renderActions()}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\treturn Object.keys(this.props.fields).map(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\treturn (\r\n\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t{field.label ? field.label : '<' + field.name + '>'}\r\n\t\t\t\t</Table.HeaderCell>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tif (\r\n\t\t\t!this.props.hasActions &&\r\n\t\t\t!this.props.canEdit &&\r\n\t\t\t!this.props.canDelete\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn <Table.HeaderCell>{this.props.t('Actions')}</Table.HeaderCell>;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Button, Dropdown, Form, Icon, Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw, DataTableRef } from '../../types';\r\nimport { get, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\tobj: T;\r\n\ttableRef: DataTableRef;\r\n\tactionable: boolean;\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tediting: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n\tonEdit: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\thandleChange: HandleChangeFunc;\r\n\tnewData: any;\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onSave = () => {\r\n\t\tconst { obj, tableRef } = this.props;\r\n\r\n\t\tif (this.props.onSave) {\r\n\t\t\tthis.props.onSave(obj, this.props.newData, tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate onEditEmpty = () => {\r\n\t\tthis.props.onEdit(undefined, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onEdit = () => {\r\n\t\tthis.props.onEdit(this.props.obj, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onDelete = () => {\r\n\t\tif (this.props.onDelete) {\r\n\t\t\tthis.props.onDelete(this.props.obj, this.props.tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{this.renderFields()}\r\n\t\t\t\t{this.renderActions()}\r\n\t\t\t</Table.Row>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\tconst { fields } = this.props;\r\n\r\n\t\treturn fields.map((field, j) => (\r\n\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t{this.renderField(field)}\r\n\t\t\t</Table.Cell>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst { obj, editing, tableRef } = this.props;\r\n\r\n\t\treturn field.edit && editing\r\n\t\t\t? typeof field.edit === 'function'\r\n\t\t\t\t? field.edit(obj, tableRef)\r\n\t\t\t\t: this.renderEdit(obj, field)\r\n\t\t\t: typeof field.view === 'function'\r\n\t\t\t? field.view(obj, tableRef)\r\n\t\t\t: get(obj, field.name);\r\n\t}\r\n\r\n\tprivate renderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : 'text'}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tobj,\r\n\t\t\tactionable,\r\n\t\t\tcanEdit,\r\n\t\t\tcanDelete,\r\n\t\t\tediting,\r\n\t\t\ttableRef\r\n\t\t} = this.props;\r\n\r\n\t\tconst _canEdit = typeof canEdit === 'function' ? canEdit(obj) : canEdit;\r\n\t\tconst _canDelete =\r\n\t\t\ttypeof canDelete === 'function' ? canDelete(obj) : canEdit;\r\n\r\n\t\tif (!actions && !actionable) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet edit = null;\r\n\t\tif (_canEdit && editing) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onSave}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t('Save')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEditEmpty}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t} else if (_canEdit) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t('Edit')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet del = null;\r\n\t\tif (_canDelete) {\r\n\t\t\tdel = (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tnegative\r\n\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\tonClick={this.onDelete}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t('Remove')}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t{edit}\r\n\t\t\t\t{del}\r\n\t\t\t\t{actions ? actions(obj, tableRef) : null}\r\n\t\t\t</Table.Cell>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Grid, Segment } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../actions';\r\nimport {\r\n\trequestChange,\r\n\trequestCreate,\r\n\trequestDelete,\r\n\trequestDetails,\r\n\trequestList,\r\n\tsetFilter\r\n} from '../../actions/dataview';\r\nimport { DataViewState } from '../../reducers/dataview';\r\nimport {\r\n\tAppState,\r\n\tDataFieldRaw,\r\n\tDataTableRef,\r\n\tDataViewRef,\r\n\tIdFunction\r\n} from '../../types';\r\nimport CreateForm from '../CreateForm';\r\nimport DataTable, { Props as DataTableProps } from '../DataTable';\r\nimport FilterForm from '../FilterForm';\r\nimport { checkPermissions } from '../Util';\r\n\r\nimport {\r\n\tDispatchProps,\r\n\tFullProps,\r\n\tOwnProps,\r\n\tOwnState,\r\n\tStateProps\r\n} from './types';\r\nexport { DataViewFields } from './types';\r\n\r\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\r\n\tprivate interval: NodeJS.Timer;\r\n\r\n\tpublic constructor(props: FullProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tdata: undefined\r\n\t\t};\r\n\r\n\t\tthis.details = this.details.bind(this);\r\n\t\tthis.create = this.create.bind(this);\r\n\t\tthis.edit = this.edit.bind(this);\r\n\t\tthis.endEdit = this.endEdit.bind(this);\r\n\t\tthis.save = this.save.bind(this);\r\n\t\tthis.delete = this.delete.bind(this);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tif (!this.props.static) {\r\n\t\t\tthis.props.requestList();\r\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic componentWillUnmount() {\r\n\t\tif (this.interval) {\r\n\t\t\tclearInterval(this.interval);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(\r\n\t\tnextProps: FullProps<T>,\r\n\t\tnextState: OwnState<T>\r\n\t) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.filter !== this.props.filter ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.data !== this.state.data\r\n\t\t);\r\n\t}\r\n\r\n\t// Create a new data entry\r\n\tprivate create(data: T) {\r\n\t\tthis.props.requestCreate(data);\r\n\t}\r\n\r\n\t// Get the details for a data entry\r\n\tprivate details(data: T) {\r\n\t\tthis.props.requestDetails(data);\r\n\t}\r\n\r\n\t// Select a data entry for editing\r\n\tprivate edit(data: T | undefined) {\r\n\t\tthis.setState({ data });\r\n\t}\r\n\r\n\t// Save/Update an existing data entry\r\n\tprivate save(data: T, newData: any) {\r\n\t\tthis.props.requestChange(data, newData);\r\n\t\tthis.endEdit();\r\n\t}\r\n\r\n\t// End editing an entry\r\n\tprivate endEdit() {\r\n\t\tthis.setState({\r\n\t\t\tdata: undefined\r\n\t\t});\r\n\t}\r\n\r\n\t// Delete a data entry\r\n\tprivate delete(data: T) {\r\n\t\tthis.props.requestDelete(data);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { filter, title, createTitle, filterTitle } = this.props;\r\n\r\n\t\tconst checks: ((val: T) => boolean)[] = [];\r\n\t\tlet regsValid = false;\r\n\r\n\t\t// Get all the fields of the table\r\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(\r\n\t\t\tthis.props.fields,\r\n\t\t\t(value, name) => {\r\n\t\t\t\tlet val: DataFieldRaw<T> = {\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tview: true\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// If the column is a string use that as the label\r\n\t\t\t\t// If the column is a function, use that function to display the cell\r\n\t\t\t\t// else if the column provides a view function then use that to display the cell\r\n\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\tval.label = value;\r\n\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\tvalue(obj, this.expandRef(tableRef));\r\n\t\t\t\t} else if (typeof value === 'object') {\r\n\t\t\t\t\tval = { ...val, ...value };\r\n\t\t\t\t\tif (typeof value.view === 'function') {\r\n\t\t\t\t\t\tconst func = value.view;\r\n\t\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\t\tfunc(obj, this.expandRef(tableRef));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// Get all the fields for the create form\r\n\t\t// Get all the fields for the filter form\r\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tObject.keys(fields).forEach(f => {\r\n\t\t\tif (fields[f].create) {\r\n\t\t\t\tcreateFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t\tif (fields[f].filter) {\r\n\t\t\t\tfilterFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tObject.keys(filter).forEach(name => {\r\n\t\t\t\tconst value = filter[name];\r\n\r\n\t\t\t\t// Get the filter field according to the filterName if specified,\r\n\t\t\t\t// otherwise just the name\r\n\t\t\t\tconst ff =\r\n\t\t\t\t\tObject.keys(filterFields)\r\n\t\t\t\t\t\t.map(f => filterFields[f])\r\n\t\t\t\t\t\t.find(f => f.filterName === name) || filterFields[name];\r\n\r\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\r\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name);\r\n\t\t\t\tif (typeof ff.filterValue === 'function') {\r\n\t\t\t\t\tval = ff.filterValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it is an array then we need to check if the value is in the array\r\n\t\t\t\t// Otherwise just use a normal regex check\r\n\t\t\t\tif (_.isArray(value)) {\r\n\t\t\t\t\tif (value.length === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tchecks.push((dataVal: T) => {\r\n\t\t\t\t\t\tconst v = val(dataVal);\r\n\t\t\t\t\t\treturn value.indexOf(v) >= 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchecks.push((dataVal: T) =>\r\n\t\t\t\t\t\tnew RegExp(value, 'i').test(val(dataVal))\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tregsValid = true;\r\n\t\t} catch {\r\n\t\t\tregsValid = false;\r\n\t\t}\r\n\r\n\t\t// Filter out the values according to the filters\r\n\t\t// If the regex isn't valid then we don't want to filter\r\n\t\tconst list = this.props.list.filter(data => {\r\n\t\t\treturn !regsValid || checks.every(check => check(data));\r\n\t\t});\r\n\r\n\t\t// Check how many columns we need for the create and filter form\r\n\t\tconst cols = createTitle && filterTitle ? 2 : 1;\r\n\r\n\t\t// Wrap the provided actions if we have any\r\n\t\tconst origActions = this.props.actions;\r\n\t\tlet actions = origActions;\r\n\t\tif (typeof origActions === 'function') {\r\n\t\t\tactions = (obj, tableRef) => origActions(obj, this.expandRef(tableRef));\r\n\t\t}\r\n\r\n\t\tconst DT = this.createTable();\r\n\r\n\t\tconst createForm = this.renderCreateForm(createTitle, createFields);\r\n\t\tconst filterForm = this.renderFilterForm(\r\n\t\t\tfilterTitle,\r\n\t\t\tfilterFields,\r\n\t\t\tregsValid\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<Grid stackable doubling columns={cols}>\r\n\t\t\t\t\t{createForm}\r\n\t\t\t\t\t{filterForm}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<DT\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\ticon={this.props.icon}\r\n\t\t\t\t\tlist={list}\r\n\t\t\t\t\tidFunc={this.props.idFunc}\r\n\t\t\t\t\tfields={fields}\r\n\t\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\t\tonSave={this.onSave}\r\n\t\t\t\t\tonDelete={this.onDelete}\r\n\t\t\t\t\tcanEdit={this.canEdit}\r\n\t\t\t\t\tcanDelete={this.canDelete}\r\n\t\t\t\t\tactions={actions}\r\n\t\t\t\t\tisEditing={this.isEditing}\r\n\t\t\t\t/>\r\n\t\t\t</Segment>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate createTable() {\r\n\t\treturn DataTable as React.ComponentClass<DataTableProps<T>>;\r\n\t}\r\n\r\n\tprivate expandRef = (tableRef: DataTableRef): DataViewRef<T> => ({\r\n\t\t...tableRef,\r\n\t\tcreate: this.create,\r\n\t\tdetails: this.details,\r\n\t\tsave: this.save,\r\n\t\tedit: this.edit,\r\n\t\tendEdit: this.endEdit,\r\n\t\tdelete: this.delete\r\n\t});\r\n\r\n\tprivate onCreate = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onCreate\r\n\t\t\t? this.props.onCreate(obj, this.expandRef(tableRef))\r\n\t\t\t: this.create(obj);\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onEdit\r\n\t\t\t? this.props.onEdit(obj, this.expandRef(tableRef))\r\n\t\t\t: this.edit(obj);\r\n\t};\r\n\r\n\tprivate onSave = (obj: T, newObj: any, tableRef: DataTableRef) => {\r\n\t\tthis.props.onSave\r\n\t\t\t? this.props.onSave(obj, newObj, this.expandRef(tableRef))\r\n\t\t\t: this.save(obj, newObj);\r\n\t};\r\n\r\n\tprivate onDelete = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onDelete\r\n\t\t\t? this.props.onDelete(obj, this.expandRef(tableRef))\r\n\t\t\t: this.delete(obj);\r\n\t};\r\n\r\n\tprivate canEdit = (obj: T) => {\r\n\t\tconst { canEdit, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canEdit === 'function' ? canEdit(obj) : !!canEdit) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('modify'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate canDelete = (obj: T) => {\r\n\t\tconst { canDelete, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canDelete === 'function' ? canDelete(obj) : !!canDelete) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('delete'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate isEditing = (obj: T) => this.props.equals(obj, this.state.data);\r\n\r\n\tprivate renderCreateForm(\r\n\t\tcreateTitle: string | undefined,\r\n\t\tcreateFields: { [x: string]: DataFieldRaw<T> }\r\n\t) {\r\n\t\tconst { checkCreatePerm, perms, perm, createButton, creating } = this.props;\r\n\t\tif (\r\n\t\t\t!createTitle ||\r\n\t\t\t(checkCreatePerm && !checkPermissions(perms, perm.concat('create')))\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<CreateForm\r\n\t\t\t\t\ttitle={createTitle}\r\n\t\t\t\t\tbutton={createButton}\r\n\t\t\t\t\tcreating={creating}\r\n\t\t\t\t\tfields={createFields}\r\n\t\t\t\t\tonCreate={this.onCreate}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFilterForm(\r\n\t\tfilterTitle: string | undefined,\r\n\t\tfilterFields: { [x: string]: DataFieldRaw<T> },\r\n\t\tregsValid: boolean\r\n\t) {\r\n\t\tif (!filterTitle) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<FilterForm\r\n\t\t\t\t\ttitle={filterTitle}\r\n\t\t\t\t\tfields={filterFields}\r\n\t\t\t\t\tvalid={regsValid}\r\n\t\t\t\t\tvalues={this.props.filter}\r\n\t\t\t\t\tonFilterChange={this.props.setFilter}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\r\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\r\n\t\tconst state: DataViewState<T> = _.get(\r\n\t\t\t_state,\r\n\t\t\tendpoint.replace(/\\//g, '_').replace('-', '')\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tcreating: state ? state.creating : false,\r\n\t\t\tfilter: state && state.filter ? state.filter : {},\r\n\t\t\tlist: state ? state.list : [],\r\n\t\t\ttypes: _state.api.types,\r\n\t\t\tidFunc: id,\r\n\t\t\tperm: endpoint.split('/'),\r\n\t\t\tperms: _state.api.permissions\r\n\t\t};\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps<T>(\r\n\tendpoint: string,\r\n\tid: IdFunction<T>,\r\n\tnoDetails: boolean\r\n) {\r\n\treturn (dispatch: Dispatch<AppAction>) => {\r\n\t\treturn {\r\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\r\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\r\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\r\n\t\t\trequestChange: (data: T, newData: object) =>\r\n\t\t\t\tdispatch(requestChange(endpoint, id, data, newData)),\r\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\r\n\t\t\tsetFilter: (filter: string, value: string) =>\r\n\t\t\t\tdispatch(setFilter(endpoint, filter, value)),\r\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2)\r\n\t\t};\r\n\t};\r\n}\r\n\r\nexport default function createDataView<T>(\r\n\tendpoint: string,\r\n\tobjId: string | IdFunction<T>,\r\n\tnoDetails?: boolean\r\n) {\r\n\tif (!objId) {\r\n\t\tobjId = 'id';\r\n\t}\r\n\tconst id =\r\n\t\ttypeof objId === 'function'\r\n\t\t\t? objId\r\n\t\t\t: (data: T) => _.get(data, objId as string);\r\n\r\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\r\n\t\tmapStateToProps<T>(endpoint, id),\r\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\r\n\t)(DataView as any);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Accordion, Button, Dropdown, Form, Icon } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\ttitle: string;\r\n\tcreating: boolean;\r\n\tonCreate: (data: any, view: DataTableRef) => void;\r\n\tbutton?: string;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n}\r\n\r\ninterface OwnState {\r\n\topen: boolean;\r\n\tnewData: any;\r\n}\r\n\r\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t\tthis.create = this.create.bind(this);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextState.newData !== this.state.newData ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate create() {\r\n\t\tconst data = {};\r\n\t\tObject.keys(this.state.newData).forEach(key => {\r\n\t\t\t_.set(data, key, this.state.newData[key]);\r\n\t\t});\r\n\r\n\t\tthis.props.onCreate(data, {\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: this.setState,\r\n\t\t\thandleChange: this.handleChange\r\n\t\t});\r\n\t}\r\n\r\n\tprivate canCreate(): boolean {\r\n\t\treturn Object.keys(this.props.fields).every(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst key = field.createName ? field.createName : name;\r\n\t\t\treturn (\r\n\t\t\t\ttypeof field === 'string' || !field.required || this.state.newData[key]\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, creating } = this.props;\r\n\r\n\t\tconst _t = this.props.t;\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form loading={creating}>\r\n\t\t\t\t\t\t{this.renderFieldGroups()}\r\n\r\n\t\t\t\t\t\t<Button primary onClick={this.create} disabled={!this.canCreate()}>\r\n\t\t\t\t\t\t\t{this.props.button || _t('Create')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFieldGroups() {\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.createName ? field.createName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn <div key={i}>{this.renderField(fg.only)}</div>;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{fg.first && this.renderField(fg.first)}\r\n\r\n\t\t\t\t\t{fg.second && this.renderField(fg.second)}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst state = this.state.newData;\r\n\r\n\t\tif (typeof field.create === 'function') {\r\n\t\t\treturn field.create({\r\n\t\t\t\tstate: state,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: state[field.name]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid={true}\r\n\t\t\t\t\tselection={true}\r\n\t\t\t\t\tsearch={true}\r\n\t\t\t\t\trequired={field.required}\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tvalue={state[field.name]}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\trequired={field.required}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tname={field.name}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tvalue={state[field.name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withTranslation('CreateForm')(CreateForm);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { Accordion, Dropdown, Form, Icon, Message } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> {\r\n\ttitle: string;\r\n\tvalid: boolean;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n\tvalues: {\r\n\t\t[x: string]: string | string[];\r\n\t};\r\n\tonFilterChange: (key: string, value: string) => void;\r\n}\r\n\r\ninterface State {\r\n\topen: boolean;\r\n}\r\n\r\nclass FilterForm<T> extends React.Component<Props<T>, State> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false\r\n\t\t};\r\n\r\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange);\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: State) {\r\n\t\treturn (\r\n\t\t\tnextProps.values !== this.props.values ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.valid !== this.props.valid ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, fields, values, valid } = this.props;\r\n\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(fields).forEach(name => {\r\n\t\t\tconst field = fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.filterName ? field.filterName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst fs = fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid);\r\n\t\t\t}\r\n\r\n\t\t\tconst first = fg.first\r\n\t\t\t\t? this.renderField(fg.first, _.get(values, fg.first.name), !valid)\r\n\t\t\t\t: null;\r\n\t\t\tconst second = fg.second\r\n\t\t\t\t? this.renderField(fg.second, _.get(values, fg.second.name), !valid)\r\n\t\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{first}\r\n\t\t\t\t\t{second}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t{fs}\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t\tvisible={!valid}\r\n\t\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderField(\r\n\t\tfield: DataFieldRaw<T>,\r\n\t\tvalue: string | string[],\r\n\t\terror: boolean\r\n\t) {\r\n\t\tif (typeof field.filter === 'function') {\r\n\t\t\treturn field.filter({\r\n\t\t\t\tstate: this.props.values,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tvalue = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={field.name}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\terror={error}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FilterForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx"],"sourceRoot":""}