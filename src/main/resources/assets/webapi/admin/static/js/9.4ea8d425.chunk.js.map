{"version":3,"sources":["views/Integrations/Nucleus/Jails.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx","components/Location/index.tsx"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_5__components_DataView__","Jails","_super","__extends","prototype","componentDidMount","this","props","requestWorlds","render","t","fields","name","label","create","filter","required","wide","world","view","createName","filterName","options","__WEBPACK_IMPORTED_MODULE_7__components_Util__","worlds","position","isGroup","jail","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_6__components_Location__","location","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","Group","inline","Input","type","width","placeholder","value","state","onChange","handleChange","canDelete","icon","title","filterTitle","createTitle","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","list","dispatch","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","__WEBPACK_IMPORTED_MODULE_1_react_i18next__","DataTable","_this","call","changePage","event","page","preventDefault","setState","onEdit","obj","newData","keys","forEach","edit","__WEBPACK_IMPORTED_MODULE_0_lodash__","bind","doHandleChange","__WEBPACK_IMPORTED_MODULE_5__Util__","key","__assign","_a","shouldComponentUpdate","nextProps","nextState","canEdit","actions","map","f","maxPage","Math","ceil","length","min","_t","editable","deletable","__WEBPACK_IMPORTED_MODULE_1_react__","style","marginTop","renderHeader","striped","stackable","__WEBPACK_IMPORTED_MODULE_7__TableHeader__","hasActions","i18n","__WEBPACK_IMPORTED_MODULE_4__services_i18n__","Body","renderRows","__WEBPACK_IMPORTED_MODULE_6__Pagination__","fitted","listPage","slice","thisRef","changes","i","__WEBPACK_IMPORTED_MODULE_8__TableRow__","idFunc","tableRef","actionable","editing","isEditing","onSave","onDelete","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","Pagination","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","renderFirst","renderPrevMore","renderMain","renderNextMore","renderLast","Item","onClick","e","from","max","to","pages","push","p","active","DataTableHeader","Header","Row","renderFields","renderActions","field","HeaderCell","TableRow","apply","arguments","onEditEmpty","undefined","j","Cell","collapsing","renderField","renderEdit","__WEBPACK_IMPORTED_MODULE_2__Util__","col","Field","fluid","selection","search","control","_canEdit","_canDelete","primary","disabled","updating","loading","secondary","del","negative","endpoint","objId","noDetails","id","data","_state","ownProps","replace","creating","types","api","perm","split","perms","permissions","mapStateToProps","requestList","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","expandRef","details","save","endEdit","delete","onCreate","newObj","__WEBPACK_IMPORTED_MODULE_8__Util__","concat","static","interval","setInterval","componentWillUnmount","clearInterval","checks","regsValid","val","func_1","createFields","filterFields","ff","find","dataVal","filterValue","v","indexOf","RegExp","test","_b","every","check","cols","origActions","DT","createTable","createForm","renderCreateForm","filterForm","renderFilterForm","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_6__DataTable__","checkCreatePerm","createButton","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","CreateForm","handleClick","open","__WEBPACK_IMPORTED_MODULE_4__Util__","canCreate","styled","Title","Content","renderFieldGroups","fieldGroups","newField","only","second","first","fg","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","fs","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","content","multiple","__webpack_require__","n","color","x","toFixed","y","z"],"mappings":"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","file":"static/js/9.4ea8d425.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Form } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../../actions';\r\nimport { ListRequestAction, requestList } from '../../../actions/dataview';\r\nimport DataViewFunc, { DataViewFields } from '../../../components/DataView';\r\nimport Location from '../../../components/Location';\r\nimport { renderWorldOptions } from '../../../components/Util';\r\nimport { NucleusNamedLocation, World } from '../../../fetch';\r\nimport { AppState } from '../../../types';\r\n\r\n// tslint:disable-next-line: variable-name\r\nconst DataView = DataViewFunc('nucleus/jail', 'name');\r\n\r\ninterface Props extends WithTranslation {\r\n\tworlds: World[];\r\n\trequestWorlds: () => ListRequestAction;\r\n}\r\n\r\ninterface OwnState {}\r\n\r\nclass Jails extends React.Component<Props, OwnState> {\r\n\tpublic componentDidMount() {\r\n\t\tthis.props.requestWorlds();\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst fields: DataViewFields<NucleusNamedLocation> = {\r\n\t\t\tname: {\r\n\t\t\t\tlabel: t('Name'),\r\n\t\t\t\tcreate: true,\r\n\t\t\t\tfilter: true,\r\n\t\t\t\trequired: true,\r\n\t\t\t\twide: true\r\n\t\t\t},\r\n\t\t\tworld: {\r\n\t\t\t\tlabel: t('World'),\r\n\t\t\t\tview: false,\r\n\t\t\t\tcreate: true,\r\n\t\t\t\tcreateName: 'location.world',\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tfilterName: 'location.world.uuid',\r\n\t\t\t\toptions: renderWorldOptions(this.props.worlds),\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tposition: {\r\n\t\t\t\tlabel: t('Location'),\r\n\t\t\t\tisGroup: true,\r\n\t\t\t\twide: true,\r\n\t\t\t\tview: jail => <Location location={jail.location} />,\r\n\t\t\t\tcreate: view => (\r\n\t\t\t\t\t<Form.Group inline>\r\n\t\t\t\t\t\t<label>Position</label>\r\n\t\t\t\t\t\t<Form.Input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\twidth={6}\r\n\t\t\t\t\t\t\tname=\"location.position.x\"\r\n\t\t\t\t\t\t\tplaceholder=\"X\"\r\n\t\t\t\t\t\t\tvalue={view.state['location.position.x']}\r\n\t\t\t\t\t\t\tonChange={view.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\twidth={6}\r\n\t\t\t\t\t\t\tname=\"location.position.y\"\r\n\t\t\t\t\t\t\tplaceholder=\"Y\"\r\n\t\t\t\t\t\t\tvalue={view.state['location.position.y']}\r\n\t\t\t\t\t\t\tonChange={view.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\twidth={6}\r\n\t\t\t\t\t\t\tname=\"location.position.z\"\r\n\t\t\t\t\t\t\tplaceholder=\"Z\"\r\n\t\t\t\t\t\t\tvalue={view.state['location.position.z']}\r\n\t\t\t\t\t\t\tonChange={view.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<DataView\r\n\t\t\t\tcanDelete\r\n\t\t\t\ticon=\"wrench\"\r\n\t\t\t\ttitle={t('Jails')}\r\n\t\t\t\tfilterTitle={t('FilterJails')}\r\n\t\t\t\tcreateTitle={t('CreateJail')}\r\n\t\t\t\tfields={fields}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n\treturn {\r\n\t\tworlds: state.world.list\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\r\n\treturn {\r\n\t\trequestWorlds: () => dispatch(requestList('world', true))\r\n\t};\r\n};\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withTranslation('Integrations.Nucleus')(Jails));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/Nucleus/Jails.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Header, Icon, SemanticICONS, Table } from 'semantic-ui-react';\r\n\r\nimport i18n from '../../services/i18n';\r\nimport { DataFieldRaw, DataTableRef, IdFunction } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nimport Pagination from './Pagination';\r\nimport TableHeader from './TableHeader';\r\nimport TableRow from './TableRow';\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport type DataTableFields<T> = {\r\n\t[key: string]: DataFieldRaw<T>;\r\n};\r\n\r\nexport interface Props<T> {\r\n\ttitle?: string;\r\n\ticon?: SemanticICONS;\r\n\tlist: T[];\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tfields: DataTableFields<T>;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\tonEdit?: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tidFunc: IdFunction<T>;\r\n\tisEditing: (data: T) => boolean;\r\n}\r\n\r\ninterface AllProps<T> extends Props<T>, WithTranslation {}\r\n\r\ninterface OwnState {\r\n\tpage: number;\r\n\tnewData: any;\r\n}\r\n\r\nclass DataTable<T> extends React.Component<AllProps<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: AllProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.changePage = this.changePage.bind(this);\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate changePage = (event: React.MouseEvent<HTMLElement>, page: number) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\tpage: page\r\n\t\t});\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T | undefined, view: DataTableRef): void => {\r\n\t\tconst newData = {};\r\n\t\tif (obj) {\r\n\t\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\t\tif (!this.props.fields[name].edit) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnewData[name] = _.get(obj, name);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tnewData: newData\r\n\t\t});\r\n\r\n\t\tif (this.props.onEdit) {\r\n\t\t\tthis.props.onEdit(obj, view);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.page !== this.state.page ||\r\n\t\t\tnextState.newData !== this.state.newData\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { list, canEdit, canDelete, actions } = this.props;\r\n\t\tconst fields = Object.keys(this.props.fields)\r\n\t\t\t.map(f => this.props.fields[f])\r\n\t\t\t.filter(f => f.view);\r\n\r\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE);\r\n\t\tconst page = Math.min(this.state.page, maxPage - 1);\r\n\r\n\t\tconst _t = this.props.t;\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ marginTop: '2em' }}>\r\n\t\t\t\t{this.renderHeader()}\r\n\r\n\t\t\t\t<Table striped={true} stackable>\r\n\t\t\t\t\t<TableHeader\r\n\t\t\t\t\t\tfields={fields}\r\n\t\t\t\t\t\thasActions={typeof actions !== typeof undefined}\r\n\t\t\t\t\t\tcanEdit={editable}\r\n\t\t\t\t\t\tcanDelete={deletable}\r\n\t\t\t\t\t\ti18n={i18n}\r\n\t\t\t\t\t\tt={_t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Table.Body>{this.renderRows(fields, page)}</Table.Body>\r\n\t\t\t\t</Table>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tmaxPage={maxPage}\r\n\t\t\t\t\tchangePage={this.changePage}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderHeader() {\r\n\t\tconst { icon, title } = this.props;\r\n\r\n\t\tif (!title) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t<Icon fitted name={icon} /> {title}\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderRows(fields: DataFieldRaw<T>[], page: number) {\r\n\t\tconst { list, canEdit, canDelete, actions, t } = this.props;\r\n\r\n\t\tconst listPage = list.slice(\r\n\t\t\tpage * ITEMS_PER_PAGE,\r\n\t\t\t(page + 1) * ITEMS_PER_PAGE\r\n\t\t);\r\n\r\n\t\tconst thisRef: DataTableRef = {\r\n\t\t\thandleChange: this.handleChange,\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: (changes: object) =>\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewData: { ...this.state.newData, ...changes }\r\n\t\t\t\t})\r\n\t\t};\r\n\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn listPage.map((obj, i) => (\r\n\t\t\t<TableRow\r\n\t\t\t\tkey={this.props.idFunc(obj)}\r\n\t\t\t\tobj={obj}\r\n\t\t\t\ttableRef={thisRef}\r\n\t\t\t\tactionable={editable || deletable}\r\n\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\tcanDelete={canDelete}\r\n\t\t\t\tediting={this.props.isEditing(obj)}\r\n\t\t\t\tfields={fields}\r\n\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\tonSave={this.props.onSave}\r\n\t\t\t\tonDelete={this.props.onDelete}\r\n\t\t\t\tactions={actions}\r\n\t\t\t\tnewData={this.state.newData}\r\n\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\ti18n={i18n}\r\n\t\t\t\tt={t}\r\n\t\t\t/>\r\n\t\t));\r\n\t}\r\n}\r\n\r\nexport default withTranslation('DataTable')(DataTable);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\n\r\nexport interface Props {\r\n\tpage: number;\r\n\tmaxPage: number;\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void;\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\tpublic shouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{this.renderFirst()}\r\n\t\t\t\t{this.renderPrevMore()}\r\n\t\t\t\t{this.renderMain()}\r\n\t\t\t\t{this.renderNextMore()}\r\n\t\t\t\t{this.renderLast()}\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFirst() {\r\n\t\tif (this.props.page <= 4) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\treturn <Menu.Item onClick={e => this.props.changePage(e, 0)}>1</Menu.Item>;\r\n\t}\r\n\r\n\tprivate renderPrevMore() {\r\n\t\tif (this.props.page <= 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page - 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderMain() {\r\n\t\tconst { page, maxPage } = this.props;\r\n\t\tconst from = Math.max(0, page - 4);\r\n\t\tconst to = Math.min(maxPage, page + 5);\r\n\r\n\t\tconst pages = [];\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i);\r\n\t\t}\r\n\r\n\t\treturn pages.map(p => (\r\n\t\t\t<Menu.Item\r\n\t\t\t\tkey={p}\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, p)}\r\n\t\t\t\tactive={p === page}\r\n\t\t\t>\r\n\t\t\t\t{p + 1}\r\n\t\t\t</Menu.Item>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderNextMore() {\r\n\t\tif (this.props.page >= this.props.maxPage - 6) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page + 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderLast() {\r\n\t\tif (this.props.page >= this.props.maxPage - 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu.Item\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, this.props.maxPage - 1)}\r\n\t\t\t>\r\n\t\t\t\t{this.props.maxPage}\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw } from '../../types';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\thasActions: boolean;\r\n\tcanEdit?: boolean;\r\n\tcanDelete?: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields;\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{this.renderFields()}\r\n\t\t\t\t\t{this.renderActions()}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\treturn Object.keys(this.props.fields).map(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\treturn (\r\n\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t{field.label ? field.label : '<' + field.name + '>'}\r\n\t\t\t\t</Table.HeaderCell>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tif (\r\n\t\t\t!this.props.hasActions &&\r\n\t\t\t!this.props.canEdit &&\r\n\t\t\t!this.props.canDelete\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn <Table.HeaderCell>{this.props.t('Actions')}</Table.HeaderCell>;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Button, Dropdown, Form, Icon, Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw, DataTableRef } from '../../types';\r\nimport { get, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\tobj: T;\r\n\ttableRef: DataTableRef;\r\n\tactionable: boolean;\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tediting: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n\tonEdit: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\thandleChange: HandleChangeFunc;\r\n\tnewData: any;\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onSave = () => {\r\n\t\tconst { obj, tableRef } = this.props;\r\n\r\n\t\tif (this.props.onSave) {\r\n\t\t\tthis.props.onSave(obj, this.props.newData, tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate onEditEmpty = () => {\r\n\t\tthis.props.onEdit(undefined, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onEdit = () => {\r\n\t\tthis.props.onEdit(this.props.obj, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onDelete = () => {\r\n\t\tif (this.props.onDelete) {\r\n\t\t\tthis.props.onDelete(this.props.obj, this.props.tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{this.renderFields()}\r\n\t\t\t\t{this.renderActions()}\r\n\t\t\t</Table.Row>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\tconst { fields } = this.props;\r\n\r\n\t\treturn fields.map((field, j) => (\r\n\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t{this.renderField(field)}\r\n\t\t\t</Table.Cell>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst { obj, editing, tableRef } = this.props;\r\n\r\n\t\treturn field.edit && editing\r\n\t\t\t? typeof field.edit === 'function'\r\n\t\t\t\t? field.edit(obj, tableRef)\r\n\t\t\t\t: this.renderEdit(obj, field)\r\n\t\t\t: typeof field.view === 'function'\r\n\t\t\t? field.view(obj, tableRef)\r\n\t\t\t: get(obj, field.name);\r\n\t}\r\n\r\n\tprivate renderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : 'text'}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tobj,\r\n\t\t\tactionable,\r\n\t\t\tcanEdit,\r\n\t\t\tcanDelete,\r\n\t\t\tediting,\r\n\t\t\ttableRef\r\n\t\t} = this.props;\r\n\r\n\t\tconst _canEdit = typeof canEdit === 'function' ? canEdit(obj) : canEdit;\r\n\t\tconst _canDelete =\r\n\t\t\ttypeof canDelete === 'function' ? canDelete(obj) : canEdit;\r\n\r\n\t\tif (!actions && !actionable) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet edit = null;\r\n\t\tif (_canEdit && editing) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onSave}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t('Save')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEditEmpty}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t} else if (_canEdit) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t('Edit')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet del = null;\r\n\t\tif (_canDelete) {\r\n\t\t\tdel = (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tnegative\r\n\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\tonClick={this.onDelete}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t('Remove')}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t{edit}\r\n\t\t\t\t{del}\r\n\t\t\t\t{actions ? actions(obj, tableRef) : null}\r\n\t\t\t</Table.Cell>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Grid, Segment } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../actions';\r\nimport {\r\n\trequestChange,\r\n\trequestCreate,\r\n\trequestDelete,\r\n\trequestDetails,\r\n\trequestList,\r\n\tsetFilter\r\n} from '../../actions/dataview';\r\nimport { DataViewState } from '../../reducers/dataview';\r\nimport {\r\n\tAppState,\r\n\tDataFieldRaw,\r\n\tDataTableRef,\r\n\tDataViewRef,\r\n\tIdFunction\r\n} from '../../types';\r\nimport CreateForm from '../CreateForm';\r\nimport DataTable, { Props as DataTableProps } from '../DataTable';\r\nimport FilterForm from '../FilterForm';\r\nimport { checkPermissions } from '../Util';\r\n\r\nimport {\r\n\tDispatchProps,\r\n\tFullProps,\r\n\tOwnProps,\r\n\tOwnState,\r\n\tStateProps\r\n} from './types';\r\nexport { DataViewFields } from './types';\r\n\r\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\r\n\tprivate interval: NodeJS.Timer;\r\n\r\n\tpublic constructor(props: FullProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tdata: undefined\r\n\t\t};\r\n\r\n\t\tthis.details = this.details.bind(this);\r\n\t\tthis.create = this.create.bind(this);\r\n\t\tthis.edit = this.edit.bind(this);\r\n\t\tthis.endEdit = this.endEdit.bind(this);\r\n\t\tthis.save = this.save.bind(this);\r\n\t\tthis.delete = this.delete.bind(this);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tif (!this.props.static) {\r\n\t\t\tthis.props.requestList();\r\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic componentWillUnmount() {\r\n\t\tif (this.interval) {\r\n\t\t\tclearInterval(this.interval);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(\r\n\t\tnextProps: FullProps<T>,\r\n\t\tnextState: OwnState<T>\r\n\t) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.filter !== this.props.filter ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.data !== this.state.data\r\n\t\t);\r\n\t}\r\n\r\n\t// Create a new data entry\r\n\tprivate create(data: T) {\r\n\t\tthis.props.requestCreate(data);\r\n\t}\r\n\r\n\t// Get the details for a data entry\r\n\tprivate details(data: T) {\r\n\t\tthis.props.requestDetails(data);\r\n\t}\r\n\r\n\t// Select a data entry for editing\r\n\tprivate edit(data: T | undefined) {\r\n\t\tthis.setState({ data });\r\n\t}\r\n\r\n\t// Save/Update an existing data entry\r\n\tprivate save(data: T, newData: any) {\r\n\t\tthis.props.requestChange(data, newData);\r\n\t\tthis.endEdit();\r\n\t}\r\n\r\n\t// End editing an entry\r\n\tprivate endEdit() {\r\n\t\tthis.setState({\r\n\t\t\tdata: undefined\r\n\t\t});\r\n\t}\r\n\r\n\t// Delete a data entry\r\n\tprivate delete(data: T) {\r\n\t\tthis.props.requestDelete(data);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { filter, title, createTitle, filterTitle } = this.props;\r\n\r\n\t\tconst checks: ((val: T) => boolean)[] = [];\r\n\t\tlet regsValid = false;\r\n\r\n\t\t// Get all the fields of the table\r\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(\r\n\t\t\tthis.props.fields,\r\n\t\t\t(value, name) => {\r\n\t\t\t\tlet val: DataFieldRaw<T> = {\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tview: true\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// If the column is a string use that as the label\r\n\t\t\t\t// If the column is a function, use that function to display the cell\r\n\t\t\t\t// else if the column provides a view function then use that to display the cell\r\n\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\tval.label = value;\r\n\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\tvalue(obj, this.expandRef(tableRef));\r\n\t\t\t\t} else if (typeof value === 'object') {\r\n\t\t\t\t\tval = { ...val, ...value };\r\n\t\t\t\t\tif (typeof value.view === 'function') {\r\n\t\t\t\t\t\tconst func = value.view;\r\n\t\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\t\tfunc(obj, this.expandRef(tableRef));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// Get all the fields for the create form\r\n\t\t// Get all the fields for the filter form\r\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tObject.keys(fields).forEach(f => {\r\n\t\t\tif (fields[f].create) {\r\n\t\t\t\tcreateFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t\tif (fields[f].filter) {\r\n\t\t\t\tfilterFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tObject.keys(filter).forEach(name => {\r\n\t\t\t\tconst value = filter[name];\r\n\r\n\t\t\t\t// Get the filter field according to the filterName if specified,\r\n\t\t\t\t// otherwise just the name\r\n\t\t\t\tconst ff =\r\n\t\t\t\t\tObject.keys(filterFields)\r\n\t\t\t\t\t\t.map(f => filterFields[f])\r\n\t\t\t\t\t\t.find(f => f.filterName === name) || filterFields[name];\r\n\r\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\r\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name);\r\n\t\t\t\tif (typeof ff.filterValue === 'function') {\r\n\t\t\t\t\tval = ff.filterValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it is an array then we need to check if the value is in the array\r\n\t\t\t\t// Otherwise just use a normal regex check\r\n\t\t\t\tif (_.isArray(value)) {\r\n\t\t\t\t\tif (value.length === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tchecks.push((dataVal: T) => {\r\n\t\t\t\t\t\tconst v = val(dataVal);\r\n\t\t\t\t\t\treturn value.indexOf(v) >= 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchecks.push((dataVal: T) =>\r\n\t\t\t\t\t\tnew RegExp(value, 'i').test(val(dataVal))\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tregsValid = true;\r\n\t\t} catch {\r\n\t\t\tregsValid = false;\r\n\t\t}\r\n\r\n\t\t// Filter out the values according to the filters\r\n\t\t// If the regex isn't valid then we don't want to filter\r\n\t\tconst list = this.props.list.filter(data => {\r\n\t\t\treturn !regsValid || checks.every(check => check(data));\r\n\t\t});\r\n\r\n\t\t// Check how many columns we need for the create and filter form\r\n\t\tconst cols = createTitle && filterTitle ? 2 : 1;\r\n\r\n\t\t// Wrap the provided actions if we have any\r\n\t\tconst origActions = this.props.actions;\r\n\t\tlet actions = origActions;\r\n\t\tif (typeof origActions === 'function') {\r\n\t\t\tactions = (obj, tableRef) => origActions(obj, this.expandRef(tableRef));\r\n\t\t}\r\n\r\n\t\tconst DT = this.createTable();\r\n\r\n\t\tconst createForm = this.renderCreateForm(createTitle, createFields);\r\n\t\tconst filterForm = this.renderFilterForm(\r\n\t\t\tfilterTitle,\r\n\t\t\tfilterFields,\r\n\t\t\tregsValid\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<Grid stackable doubling columns={cols}>\r\n\t\t\t\t\t{createForm}\r\n\t\t\t\t\t{filterForm}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<DT\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\ticon={this.props.icon}\r\n\t\t\t\t\tlist={list}\r\n\t\t\t\t\tidFunc={this.props.idFunc}\r\n\t\t\t\t\tfields={fields}\r\n\t\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\t\tonSave={this.onSave}\r\n\t\t\t\t\tonDelete={this.onDelete}\r\n\t\t\t\t\tcanEdit={this.canEdit}\r\n\t\t\t\t\tcanDelete={this.canDelete}\r\n\t\t\t\t\tactions={actions}\r\n\t\t\t\t\tisEditing={this.isEditing}\r\n\t\t\t\t/>\r\n\t\t\t</Segment>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate createTable() {\r\n\t\treturn DataTable as React.ComponentClass<DataTableProps<T>>;\r\n\t}\r\n\r\n\tprivate expandRef = (tableRef: DataTableRef): DataViewRef<T> => ({\r\n\t\t...tableRef,\r\n\t\tcreate: this.create,\r\n\t\tdetails: this.details,\r\n\t\tsave: this.save,\r\n\t\tedit: this.edit,\r\n\t\tendEdit: this.endEdit,\r\n\t\tdelete: this.delete\r\n\t});\r\n\r\n\tprivate onCreate = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onCreate\r\n\t\t\t? this.props.onCreate(obj, this.expandRef(tableRef))\r\n\t\t\t: this.create(obj);\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onEdit\r\n\t\t\t? this.props.onEdit(obj, this.expandRef(tableRef))\r\n\t\t\t: this.edit(obj);\r\n\t};\r\n\r\n\tprivate onSave = (obj: T, newObj: any, tableRef: DataTableRef) => {\r\n\t\tthis.props.onSave\r\n\t\t\t? this.props.onSave(obj, newObj, this.expandRef(tableRef))\r\n\t\t\t: this.save(obj, newObj);\r\n\t};\r\n\r\n\tprivate onDelete = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onDelete\r\n\t\t\t? this.props.onDelete(obj, this.expandRef(tableRef))\r\n\t\t\t: this.delete(obj);\r\n\t};\r\n\r\n\tprivate canEdit = (obj: T) => {\r\n\t\tconst { canEdit, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canEdit === 'function' ? canEdit(obj) : !!canEdit) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('modify'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate canDelete = (obj: T) => {\r\n\t\tconst { canDelete, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canDelete === 'function' ? canDelete(obj) : !!canDelete) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('delete'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate isEditing = (obj: T) => this.props.equals(obj, this.state.data);\r\n\r\n\tprivate renderCreateForm(\r\n\t\tcreateTitle: string | undefined,\r\n\t\tcreateFields: { [x: string]: DataFieldRaw<T> }\r\n\t) {\r\n\t\tconst { checkCreatePerm, perms, perm, createButton, creating } = this.props;\r\n\t\tif (\r\n\t\t\t!createTitle ||\r\n\t\t\t(checkCreatePerm && !checkPermissions(perms, perm.concat('create')))\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<CreateForm\r\n\t\t\t\t\ttitle={createTitle}\r\n\t\t\t\t\tbutton={createButton}\r\n\t\t\t\t\tcreating={creating}\r\n\t\t\t\t\tfields={createFields}\r\n\t\t\t\t\tonCreate={this.onCreate}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFilterForm(\r\n\t\tfilterTitle: string | undefined,\r\n\t\tfilterFields: { [x: string]: DataFieldRaw<T> },\r\n\t\tregsValid: boolean\r\n\t) {\r\n\t\tif (!filterTitle) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<FilterForm\r\n\t\t\t\t\ttitle={filterTitle}\r\n\t\t\t\t\tfields={filterFields}\r\n\t\t\t\t\tvalid={regsValid}\r\n\t\t\t\t\tvalues={this.props.filter}\r\n\t\t\t\t\tonFilterChange={this.props.setFilter}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\r\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\r\n\t\tconst state: DataViewState<T> = _.get(\r\n\t\t\t_state,\r\n\t\t\tendpoint.replace(/\\//g, '_').replace('-', '')\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tcreating: state ? state.creating : false,\r\n\t\t\tfilter: state && state.filter ? state.filter : {},\r\n\t\t\tlist: state ? state.list : [],\r\n\t\t\ttypes: _state.api.types,\r\n\t\t\tidFunc: id,\r\n\t\t\tperm: endpoint.split('/'),\r\n\t\t\tperms: _state.api.permissions\r\n\t\t};\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps<T>(\r\n\tendpoint: string,\r\n\tid: IdFunction<T>,\r\n\tnoDetails: boolean\r\n) {\r\n\treturn (dispatch: Dispatch<AppAction>) => {\r\n\t\treturn {\r\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\r\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\r\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\r\n\t\t\trequestChange: (data: T, newData: object) =>\r\n\t\t\t\tdispatch(requestChange(endpoint, id, data, newData)),\r\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\r\n\t\t\tsetFilter: (filter: string, value: string) =>\r\n\t\t\t\tdispatch(setFilter(endpoint, filter, value)),\r\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2)\r\n\t\t};\r\n\t};\r\n}\r\n\r\nexport default function createDataView<T>(\r\n\tendpoint: string,\r\n\tobjId: string | IdFunction<T>,\r\n\tnoDetails?: boolean\r\n) {\r\n\tif (!objId) {\r\n\t\tobjId = 'id';\r\n\t}\r\n\tconst id =\r\n\t\ttypeof objId === 'function'\r\n\t\t\t? objId\r\n\t\t\t: (data: T) => _.get(data, objId as string);\r\n\r\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\r\n\t\tmapStateToProps<T>(endpoint, id),\r\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\r\n\t)(DataView as any);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Accordion, Button, Dropdown, Form, Icon } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\ttitle: string;\r\n\tcreating: boolean;\r\n\tonCreate: (data: any, view: DataTableRef) => void;\r\n\tbutton?: string;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n}\r\n\r\ninterface OwnState {\r\n\topen: boolean;\r\n\tnewData: any;\r\n}\r\n\r\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t\tthis.create = this.create.bind(this);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextState.newData !== this.state.newData ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate create() {\r\n\t\tconst data = {};\r\n\t\tObject.keys(this.state.newData).forEach(key => {\r\n\t\t\t_.set(data, key, this.state.newData[key]);\r\n\t\t});\r\n\r\n\t\tthis.props.onCreate(data, {\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: this.setState,\r\n\t\t\thandleChange: this.handleChange\r\n\t\t});\r\n\t}\r\n\r\n\tprivate canCreate(): boolean {\r\n\t\treturn Object.keys(this.props.fields).every(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst key = field.createName ? field.createName : name;\r\n\t\t\treturn (\r\n\t\t\t\ttypeof field === 'string' || !field.required || this.state.newData[key]\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, creating } = this.props;\r\n\r\n\t\tconst _t = this.props.t;\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form loading={creating}>\r\n\t\t\t\t\t\t{this.renderFieldGroups()}\r\n\r\n\t\t\t\t\t\t<Button primary onClick={this.create} disabled={!this.canCreate()}>\r\n\t\t\t\t\t\t\t{this.props.button || _t('Create')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFieldGroups() {\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.createName ? field.createName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn <div key={i}>{this.renderField(fg.only)}</div>;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{fg.first && this.renderField(fg.first)}\r\n\r\n\t\t\t\t\t{fg.second && this.renderField(fg.second)}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst state = this.state.newData;\r\n\r\n\t\tif (typeof field.create === 'function') {\r\n\t\t\treturn field.create({\r\n\t\t\t\tstate: state,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: state[field.name]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid={true}\r\n\t\t\t\t\tselection={true}\r\n\t\t\t\t\tsearch={true}\r\n\t\t\t\t\trequired={field.required}\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tvalue={state[field.name]}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\trequired={field.required}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tname={field.name}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tvalue={state[field.name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withTranslation('CreateForm')(CreateForm);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { Accordion, Dropdown, Form, Icon, Message } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> {\r\n\ttitle: string;\r\n\tvalid: boolean;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n\tvalues: {\r\n\t\t[x: string]: string | string[];\r\n\t};\r\n\tonFilterChange: (key: string, value: string) => void;\r\n}\r\n\r\ninterface State {\r\n\topen: boolean;\r\n}\r\n\r\nclass FilterForm<T> extends React.Component<Props<T>, State> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false\r\n\t\t};\r\n\r\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange);\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: State) {\r\n\t\treturn (\r\n\t\t\tnextProps.values !== this.props.values ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.valid !== this.props.valid ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, fields, values, valid } = this.props;\r\n\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(fields).forEach(name => {\r\n\t\t\tconst field = fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.filterName ? field.filterName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst fs = fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid);\r\n\t\t\t}\r\n\r\n\t\t\tconst first = fg.first\r\n\t\t\t\t? this.renderField(fg.first, _.get(values, fg.first.name), !valid)\r\n\t\t\t\t: null;\r\n\t\t\tconst second = fg.second\r\n\t\t\t\t? this.renderField(fg.second, _.get(values, fg.second.name), !valid)\r\n\t\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{first}\r\n\t\t\t\t\t{second}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t{fs}\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t\tvisible={!valid}\r\n\t\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderField(\r\n\t\tfield: DataFieldRaw<T>,\r\n\t\tvalue: string | string[],\r\n\t\terror: boolean\r\n\t) {\r\n\t\tif (typeof field.filter === 'function') {\r\n\t\t\treturn field.filter({\r\n\t\t\t\tstate: this.props.values,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tvalue = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={field.name}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\terror={error}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FilterForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx","import * as React from 'react';\r\nimport { Icon, Label } from 'semantic-ui-react';\r\n\r\nimport { Location } from '../../fetch';\r\n\r\nexport interface Props {\r\n\tlocation: Location | undefined;\r\n}\r\n\r\nexport default ({ location }: Props) =>\r\n\tlocation ? (\r\n\t\t<Label color=\"blue\">\r\n\t\t\t<Icon name=\"globe\" />\r\n\t\t\t{location.world.name}&nbsp; &nbsp;\r\n\t\t\t{location.position.x.toFixed(0)} |&nbsp;\r\n\t\t\t{location.position.y.toFixed(0)} |&nbsp;\r\n\t\t\t{location.position.z.toFixed(0)}\r\n\t\t</Label>\r\n\t) : (\r\n\t\t<Label color=\"red\">Invalid location</Label>\r\n\t);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Location/index.tsx"],"sourceRoot":""}