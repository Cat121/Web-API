{"version":3,"sources":["views/Integrations/Nucleus/Kits.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx","components/ItemStack/index.tsx"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_6__components_DataView__","Kits","_super","props","_this","call","this","renderCommands","kit","view","t","cmds","commands","map","cmd","i","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_4_semantic_ui_react__","key","color","content","onRemove","removeCmd","action","onClick","addCmd","name","placeholder","value","state","newKitCmd","onChange","handleChange","on","position","trigger","positive","icon","size","renderStacks","kits","stacks","item","__WEBPACK_IMPORTED_MODULE_7__components_ItemStack__","removeStack","addStack","Field","required","fluid","selection","search","control","options","__WEBPACK_IMPORTED_MODULE_8__components_Util__","itemTypes","Input","type","newItemType","newItemAmount","bind","__extends","prototype","componentDidMount","requestCatalog","__WEBPACK_IMPORTED_MODULE_9__types__","Item","render","fields","label","create","filter","cost","edit","cooldown","wide","canEdit","canDelete","title","filterTitle","createTitle","__WEBPACK_IMPORTED_MODULE_0_lodash__","substring","save","concat","cmdIndex","__","id","quantity","index","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","api","types","dispatch","__WEBPACK_IMPORTED_MODULE_5__actions__","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","DataTable","changePage","event","page","preventDefault","setState","onEdit","obj","newData","keys","forEach","doHandleChange","__WEBPACK_IMPORTED_MODULE_5__Util__","__assign","_a","shouldComponentUpdate","nextProps","nextState","list","actions","f","maxPage","Math","ceil","length","min","_t","editable","deletable","style","marginTop","renderHeader","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","striped","stackable","__WEBPACK_IMPORTED_MODULE_7__TableHeader__","hasActions","i18n","__WEBPACK_IMPORTED_MODULE_4__services_i18n__","Body","renderRows","__WEBPACK_IMPORTED_MODULE_6__Pagination__","fitted","listPage","slice","thisRef","changes","__WEBPACK_IMPORTED_MODULE_8__TableRow__","idFunc","tableRef","actionable","editing","isEditing","onSave","onDelete","Pagination","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","renderFirst","renderPrevMore","renderMain","renderNextMore","renderLast","e","from","max","to","pages","push","p","active","DataTableHeader","Header","Row","renderFields","renderActions","field","HeaderCell","TableRow","apply","arguments","onEditEmpty","undefined","j","Cell","collapsing","renderField","renderEdit","__WEBPACK_IMPORTED_MODULE_2__Util__","col","_canEdit","_canDelete","primary","disabled","updating","loading","secondary","del","negative","endpoint","objId","noDetails","data","__WEBPACK_IMPORTED_MODULE_2_react_redux__","_state","ownProps","replace","creating","perm","split","perms","permissions","mapStateToProps","requestList","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","expandRef","details","endEdit","delete","onCreate","newObj","__WEBPACK_IMPORTED_MODULE_8__Util__","static","interval","setInterval","componentWillUnmount","clearInterval","checks","regsValid","val","func_1","createFields","filterFields","ff","find","filterName","dataVal","filterValue","v","indexOf","RegExp","test","_b","every","check","cols","origActions","DT","createTable","createForm","renderCreateForm","filterForm","renderFilterForm","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_6__DataTable__","checkCreatePerm","createButton","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","CreateForm","handleClick","open","__WEBPACK_IMPORTED_MODULE_4__Util__","canCreate","createName","styled","Title","Content","renderFieldGroups","fieldGroups","newField","isGroup","only","second","first","fg","Group","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","fs","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","multiple","itemStackStyle","display","verticalAlign","margin","padding","border","borderRadius","default_1","renderRemoveButton","marginBottom","renderDurability","renderQuantity","renderEnchantments","renderSpawn","renderPotionEffects","renderFoodRestoration","renderBurningFuel","compact","floated","durability","unbreakable","percent","useLimit","progress","enchantments","enchant","Detail","level","renderEnchant","spawn","potionEffects","effect","num","getRoman","amplifier","getAmplifier","renderEffect","foodRestoration","burningFuel"],"mappings":"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","file":"static/js/10.b6be3827.chunk.js","sourcesContent":["import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Button, Dropdown, Form, Input, Label, Popup } from 'semantic-ui-react';\r\n\r\nimport {\r\n\tAppAction,\r\n\tCatalogRequestAction,\r\n\trequestCatalog\r\n} from '../../../actions';\r\nimport DataViewFunc, { DataViewFields } from '../../../components/DataView';\r\nimport ItemStack from '../../../components/ItemStack';\r\nimport {\r\n\thandleChange,\r\n\tHandleChangeFunc,\r\n\trenderCatalogTypeOptions\r\n} from '../../../components/Util';\r\nimport { CatalogType, NucleusKit } from '../../../fetch';\r\nimport { AppState, CatalogTypeKeys, DataViewRef } from '../../../types';\r\n\r\n// tslint:disable-next-line: variable-name\r\nconst DataView = DataViewFunc('nucleus/kit', 'name');\r\n\r\ninterface Props extends WithTranslation {\r\n\titemTypes: CatalogType[];\r\n\trequestCatalog: (type: string) => CatalogRequestAction;\r\n}\r\n\r\ninterface OwnState {\r\n\tnewKitCmd: string;\r\n\tnewItemType: string;\r\n\tnewItemAmount: number;\r\n}\r\n\r\nclass Kits extends React.Component<Props, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tnewKitCmd: '',\r\n\t\t\tnewItemType: '',\r\n\t\t\tnewItemAmount: 1\r\n\t\t};\r\n\r\n\t\tthis.handleChange = handleChange.bind(this, null);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tthis.props.requestCatalog(CatalogTypeKeys.Item);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst fields: DataViewFields<NucleusKit> = {\r\n\t\t\tname: {\r\n\t\t\t\tlabel: t('Name'),\r\n\t\t\t\tcreate: true,\r\n\t\t\t\tfilter: true,\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tcost: {\r\n\t\t\t\tlabel: t('Cost'),\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tedit: true,\r\n\t\t\t\tcreate: true,\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tcooldown: {\r\n\t\t\t\tlabel: t('Cooldown'),\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tedit: true,\r\n\t\t\t\tcreate: true,\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tcommands: {\r\n\t\t\t\tlabel: t('Commands'),\r\n\t\t\t\twide: true,\r\n\t\t\t\tview: this.renderCommands\r\n\t\t\t},\r\n\t\t\tstacks: {\r\n\t\t\t\tlabel: t('Stacks'),\r\n\t\t\t\twide: true,\r\n\t\t\t\tview: this.renderStacks\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<DataView\r\n\t\t\t\tcanEdit\r\n\t\t\t\tcanDelete\r\n\t\t\t\ticon=\"wrench\"\r\n\t\t\t\ttitle={t('Kits')}\r\n\t\t\t\tfilterTitle={t('FilterKits')}\r\n\t\t\t\tcreateTitle={t('CreateKit')}\r\n\t\t\t\tfields={fields}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderCommands = (kit: NucleusKit, view: DataViewRef<NucleusKit>) => {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst cmds = kit.commands.map((cmd, i) => {\r\n\t\t\tconst onRemove = () => this.removeCmd(view, kit, i);\r\n\t\t\treturn (\r\n\t\t\t\t<Label key={i} color=\"blue\" content={'/' + cmd} onRemove={onRemove} />\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tconst action = {\r\n\t\t\tcolor: 'green',\r\n\t\t\tcontent: t('Add'),\r\n\t\t\tonClick: () => this.addCmd(view, kit)\r\n\t\t};\r\n\t\tconst content = (\r\n\t\t\t<Input\r\n\t\t\t\tname=\"newKitCmd\"\r\n\t\t\t\taction={action}\r\n\t\t\t\tplaceholder=\"/say Hi\"\r\n\t\t\t\tvalue={this.state.newKitCmd}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{cmds}\r\n\t\t\t\t<Popup\r\n\t\t\t\t\ton=\"click\"\r\n\t\t\t\t\tposition=\"top right\"\r\n\t\t\t\t\ttrigger={<Button positive icon=\"plus\" size=\"mini\" />}\r\n\t\t\t\t\tcontent={content}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tprivate renderStacks = (kit: NucleusKit, view: DataViewRef<NucleusKit>) => {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst kits = kit.stacks.map((item, i) => {\r\n\t\t\tconst onRemove = () => this.removeStack(view, kit, i);\r\n\t\t\treturn <ItemStack key={i} item={item} onRemove={onRemove} />;\r\n\t\t});\r\n\r\n\t\tconst action = {\r\n\t\t\tcolor: 'green',\r\n\t\t\tcontent: t('Add'),\r\n\t\t\tonClick: () => this.addStack(view, kit)\r\n\t\t};\r\n\t\tconst content = (\r\n\t\t\t<Form>\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tname=\"newItemType\"\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tplaceholder={t('Type')}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\toptions={renderCatalogTypeOptions(this.props.itemTypes)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Input\r\n\t\t\t\t\tname=\"newItemAmount\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tplaceholder={t('Amount')}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\taction={action}\r\n\t\t\t\t/>\r\n\t\t\t</Form>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{kits}\r\n\t\t\t\t<Popup\r\n\t\t\t\t\ton=\"click\"\r\n\t\t\t\t\tposition=\"top right\"\r\n\t\t\t\t\ttrigger={<Button positive icon=\"plus\" size=\"mini\" />}\r\n\t\t\t\t\tcontent={content}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tprivate addCmd(view: DataViewRef<NucleusKit>, kit: NucleusKit) {\r\n\t\tlet cmd = this.state.newKitCmd;\r\n\t\tif (_.startsWith(cmd, '/')) {\r\n\t\t\tcmd = cmd.substring(1);\r\n\t\t}\r\n\r\n\t\tview.save(kit, {\r\n\t\t\tcommands: kit.commands.concat(cmd)\r\n\t\t});\r\n\t}\r\n\r\n\tprivate removeCmd(\r\n\t\tview: DataViewRef<NucleusKit>,\r\n\t\tkit: NucleusKit,\r\n\t\tcmdIndex: number\r\n\t) {\r\n\t\tview.save(kit, {\r\n\t\t\tcommands: kit.commands.filter((__, i) => i !== cmdIndex)\r\n\t\t});\r\n\t}\r\n\r\n\tprivate addStack(view: DataViewRef<NucleusKit>, kit: NucleusKit) {\r\n\t\tview.save(kit, {\r\n\t\t\tstacks: kit.stacks.concat({\r\n\t\t\t\ttype: {\r\n\t\t\t\t\tid: this.state.newItemType,\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t},\r\n\t\t\t\tquantity: this.state.newItemAmount ? this.state.newItemAmount : 1\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tprivate removeStack(\r\n\t\tview: DataViewRef<NucleusKit>,\r\n\t\tkit: NucleusKit,\r\n\t\tindex: number\r\n\t) {\r\n\t\tview.save(kit, {\r\n\t\t\tstacks: kit.stacks.filter((__, i) => i !== index)\r\n\t\t});\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n\treturn {\r\n\t\titemTypes: state.api.types[CatalogTypeKeys.Item]\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\r\n\treturn {\r\n\t\trequestCatalog: (type: string) => dispatch(requestCatalog(type))\r\n\t};\r\n};\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withTranslation('Integrations.Nucleus')(Kits));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/Nucleus/Kits.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Header, Icon, SemanticICONS, Table } from 'semantic-ui-react';\r\n\r\nimport i18n from '../../services/i18n';\r\nimport { DataFieldRaw, DataTableRef, IdFunction } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nimport Pagination from './Pagination';\r\nimport TableHeader from './TableHeader';\r\nimport TableRow from './TableRow';\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport type DataTableFields<T> = {\r\n\t[key: string]: DataFieldRaw<T>;\r\n};\r\n\r\nexport interface Props<T> {\r\n\ttitle?: string;\r\n\ticon?: SemanticICONS;\r\n\tlist: T[];\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tfields: DataTableFields<T>;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\tonEdit?: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tidFunc: IdFunction<T>;\r\n\tisEditing: (data: T) => boolean;\r\n}\r\n\r\ninterface AllProps<T> extends Props<T>, WithTranslation {}\r\n\r\ninterface OwnState {\r\n\tpage: number;\r\n\tnewData: any;\r\n}\r\n\r\nclass DataTable<T> extends React.Component<AllProps<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: AllProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.changePage = this.changePage.bind(this);\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate changePage = (event: React.MouseEvent<HTMLElement>, page: number) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\tpage: page\r\n\t\t});\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T | undefined, view: DataTableRef): void => {\r\n\t\tconst newData = {};\r\n\t\tif (obj) {\r\n\t\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\t\tif (!this.props.fields[name].edit) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnewData[name] = _.get(obj, name);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tnewData: newData\r\n\t\t});\r\n\r\n\t\tif (this.props.onEdit) {\r\n\t\t\tthis.props.onEdit(obj, view);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.page !== this.state.page ||\r\n\t\t\tnextState.newData !== this.state.newData\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { list, canEdit, canDelete, actions } = this.props;\r\n\t\tconst fields = Object.keys(this.props.fields)\r\n\t\t\t.map(f => this.props.fields[f])\r\n\t\t\t.filter(f => f.view);\r\n\r\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE);\r\n\t\tconst page = Math.min(this.state.page, maxPage - 1);\r\n\r\n\t\tconst _t = this.props.t;\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ marginTop: '2em' }}>\r\n\t\t\t\t{this.renderHeader()}\r\n\r\n\t\t\t\t<Table striped={true} stackable>\r\n\t\t\t\t\t<TableHeader\r\n\t\t\t\t\t\tfields={fields}\r\n\t\t\t\t\t\thasActions={typeof actions !== typeof undefined}\r\n\t\t\t\t\t\tcanEdit={editable}\r\n\t\t\t\t\t\tcanDelete={deletable}\r\n\t\t\t\t\t\ti18n={i18n}\r\n\t\t\t\t\t\tt={_t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Table.Body>{this.renderRows(fields, page)}</Table.Body>\r\n\t\t\t\t</Table>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tmaxPage={maxPage}\r\n\t\t\t\t\tchangePage={this.changePage}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderHeader() {\r\n\t\tconst { icon, title } = this.props;\r\n\r\n\t\tif (!title) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t<Icon fitted name={icon} /> {title}\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderRows(fields: DataFieldRaw<T>[], page: number) {\r\n\t\tconst { list, canEdit, canDelete, actions, t } = this.props;\r\n\r\n\t\tconst listPage = list.slice(\r\n\t\t\tpage * ITEMS_PER_PAGE,\r\n\t\t\t(page + 1) * ITEMS_PER_PAGE\r\n\t\t);\r\n\r\n\t\tconst thisRef: DataTableRef = {\r\n\t\t\thandleChange: this.handleChange,\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: (changes: object) =>\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewData: { ...this.state.newData, ...changes }\r\n\t\t\t\t})\r\n\t\t};\r\n\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn listPage.map((obj, i) => (\r\n\t\t\t<TableRow\r\n\t\t\t\tkey={this.props.idFunc(obj)}\r\n\t\t\t\tobj={obj}\r\n\t\t\t\ttableRef={thisRef}\r\n\t\t\t\tactionable={editable || deletable}\r\n\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\tcanDelete={canDelete}\r\n\t\t\t\tediting={this.props.isEditing(obj)}\r\n\t\t\t\tfields={fields}\r\n\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\tonSave={this.props.onSave}\r\n\t\t\t\tonDelete={this.props.onDelete}\r\n\t\t\t\tactions={actions}\r\n\t\t\t\tnewData={this.state.newData}\r\n\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\ti18n={i18n}\r\n\t\t\t\tt={t}\r\n\t\t\t/>\r\n\t\t));\r\n\t}\r\n}\r\n\r\nexport default withTranslation('DataTable')(DataTable);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\n\r\nexport interface Props {\r\n\tpage: number;\r\n\tmaxPage: number;\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void;\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\tpublic shouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{this.renderFirst()}\r\n\t\t\t\t{this.renderPrevMore()}\r\n\t\t\t\t{this.renderMain()}\r\n\t\t\t\t{this.renderNextMore()}\r\n\t\t\t\t{this.renderLast()}\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFirst() {\r\n\t\tif (this.props.page <= 4) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\treturn <Menu.Item onClick={e => this.props.changePage(e, 0)}>1</Menu.Item>;\r\n\t}\r\n\r\n\tprivate renderPrevMore() {\r\n\t\tif (this.props.page <= 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page - 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderMain() {\r\n\t\tconst { page, maxPage } = this.props;\r\n\t\tconst from = Math.max(0, page - 4);\r\n\t\tconst to = Math.min(maxPage, page + 5);\r\n\r\n\t\tconst pages = [];\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i);\r\n\t\t}\r\n\r\n\t\treturn pages.map(p => (\r\n\t\t\t<Menu.Item\r\n\t\t\t\tkey={p}\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, p)}\r\n\t\t\t\tactive={p === page}\r\n\t\t\t>\r\n\t\t\t\t{p + 1}\r\n\t\t\t</Menu.Item>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderNextMore() {\r\n\t\tif (this.props.page >= this.props.maxPage - 6) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page + 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderLast() {\r\n\t\tif (this.props.page >= this.props.maxPage - 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu.Item\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, this.props.maxPage - 1)}\r\n\t\t\t>\r\n\t\t\t\t{this.props.maxPage}\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw } from '../../types';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\thasActions: boolean;\r\n\tcanEdit?: boolean;\r\n\tcanDelete?: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields;\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{this.renderFields()}\r\n\t\t\t\t\t{this.renderActions()}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\treturn Object.keys(this.props.fields).map(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\treturn (\r\n\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t{field.label ? field.label : '<' + field.name + '>'}\r\n\t\t\t\t</Table.HeaderCell>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tif (\r\n\t\t\t!this.props.hasActions &&\r\n\t\t\t!this.props.canEdit &&\r\n\t\t\t!this.props.canDelete\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn <Table.HeaderCell>{this.props.t('Actions')}</Table.HeaderCell>;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Button, Dropdown, Form, Icon, Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw, DataTableRef } from '../../types';\r\nimport { get, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\tobj: T;\r\n\ttableRef: DataTableRef;\r\n\tactionable: boolean;\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tediting: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n\tonEdit: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\thandleChange: HandleChangeFunc;\r\n\tnewData: any;\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onSave = () => {\r\n\t\tconst { obj, tableRef } = this.props;\r\n\r\n\t\tif (this.props.onSave) {\r\n\t\t\tthis.props.onSave(obj, this.props.newData, tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate onEditEmpty = () => {\r\n\t\tthis.props.onEdit(undefined, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onEdit = () => {\r\n\t\tthis.props.onEdit(this.props.obj, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onDelete = () => {\r\n\t\tif (this.props.onDelete) {\r\n\t\t\tthis.props.onDelete(this.props.obj, this.props.tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{this.renderFields()}\r\n\t\t\t\t{this.renderActions()}\r\n\t\t\t</Table.Row>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\tconst { fields } = this.props;\r\n\r\n\t\treturn fields.map((field, j) => (\r\n\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t{this.renderField(field)}\r\n\t\t\t</Table.Cell>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst { obj, editing, tableRef } = this.props;\r\n\r\n\t\treturn field.edit && editing\r\n\t\t\t? typeof field.edit === 'function'\r\n\t\t\t\t? field.edit(obj, tableRef)\r\n\t\t\t\t: this.renderEdit(obj, field)\r\n\t\t\t: typeof field.view === 'function'\r\n\t\t\t? field.view(obj, tableRef)\r\n\t\t\t: get(obj, field.name);\r\n\t}\r\n\r\n\tprivate renderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : 'text'}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tobj,\r\n\t\t\tactionable,\r\n\t\t\tcanEdit,\r\n\t\t\tcanDelete,\r\n\t\t\tediting,\r\n\t\t\ttableRef\r\n\t\t} = this.props;\r\n\r\n\t\tconst _canEdit = typeof canEdit === 'function' ? canEdit(obj) : canEdit;\r\n\t\tconst _canDelete =\r\n\t\t\ttypeof canDelete === 'function' ? canDelete(obj) : canEdit;\r\n\r\n\t\tif (!actions && !actionable) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet edit = null;\r\n\t\tif (_canEdit && editing) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onSave}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t('Save')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEditEmpty}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t} else if (_canEdit) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t('Edit')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet del = null;\r\n\t\tif (_canDelete) {\r\n\t\t\tdel = (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tnegative\r\n\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\tonClick={this.onDelete}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t('Remove')}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t{edit}\r\n\t\t\t\t{del}\r\n\t\t\t\t{actions ? actions(obj, tableRef) : null}\r\n\t\t\t</Table.Cell>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Grid, Segment } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../actions';\r\nimport {\r\n\trequestChange,\r\n\trequestCreate,\r\n\trequestDelete,\r\n\trequestDetails,\r\n\trequestList,\r\n\tsetFilter\r\n} from '../../actions/dataview';\r\nimport { DataViewState } from '../../reducers/dataview';\r\nimport {\r\n\tAppState,\r\n\tDataFieldRaw,\r\n\tDataTableRef,\r\n\tDataViewRef,\r\n\tIdFunction\r\n} from '../../types';\r\nimport CreateForm from '../CreateForm';\r\nimport DataTable, { Props as DataTableProps } from '../DataTable';\r\nimport FilterForm from '../FilterForm';\r\nimport { checkPermissions } from '../Util';\r\n\r\nimport {\r\n\tDispatchProps,\r\n\tFullProps,\r\n\tOwnProps,\r\n\tOwnState,\r\n\tStateProps\r\n} from './types';\r\nexport { DataViewFields } from './types';\r\n\r\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\r\n\tprivate interval: NodeJS.Timer;\r\n\r\n\tpublic constructor(props: FullProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tdata: undefined\r\n\t\t};\r\n\r\n\t\tthis.details = this.details.bind(this);\r\n\t\tthis.create = this.create.bind(this);\r\n\t\tthis.edit = this.edit.bind(this);\r\n\t\tthis.endEdit = this.endEdit.bind(this);\r\n\t\tthis.save = this.save.bind(this);\r\n\t\tthis.delete = this.delete.bind(this);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tif (!this.props.static) {\r\n\t\t\tthis.props.requestList();\r\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic componentWillUnmount() {\r\n\t\tif (this.interval) {\r\n\t\t\tclearInterval(this.interval);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(\r\n\t\tnextProps: FullProps<T>,\r\n\t\tnextState: OwnState<T>\r\n\t) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.filter !== this.props.filter ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.data !== this.state.data\r\n\t\t);\r\n\t}\r\n\r\n\t// Create a new data entry\r\n\tprivate create(data: T) {\r\n\t\tthis.props.requestCreate(data);\r\n\t}\r\n\r\n\t// Get the details for a data entry\r\n\tprivate details(data: T) {\r\n\t\tthis.props.requestDetails(data);\r\n\t}\r\n\r\n\t// Select a data entry for editing\r\n\tprivate edit(data: T | undefined) {\r\n\t\tthis.setState({ data });\r\n\t}\r\n\r\n\t// Save/Update an existing data entry\r\n\tprivate save(data: T, newData: any) {\r\n\t\tthis.props.requestChange(data, newData);\r\n\t\tthis.endEdit();\r\n\t}\r\n\r\n\t// End editing an entry\r\n\tprivate endEdit() {\r\n\t\tthis.setState({\r\n\t\t\tdata: undefined\r\n\t\t});\r\n\t}\r\n\r\n\t// Delete a data entry\r\n\tprivate delete(data: T) {\r\n\t\tthis.props.requestDelete(data);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { filter, title, createTitle, filterTitle } = this.props;\r\n\r\n\t\tconst checks: ((val: T) => boolean)[] = [];\r\n\t\tlet regsValid = false;\r\n\r\n\t\t// Get all the fields of the table\r\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(\r\n\t\t\tthis.props.fields,\r\n\t\t\t(value, name) => {\r\n\t\t\t\tlet val: DataFieldRaw<T> = {\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tview: true\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// If the column is a string use that as the label\r\n\t\t\t\t// If the column is a function, use that function to display the cell\r\n\t\t\t\t// else if the column provides a view function then use that to display the cell\r\n\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\tval.label = value;\r\n\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\tvalue(obj, this.expandRef(tableRef));\r\n\t\t\t\t} else if (typeof value === 'object') {\r\n\t\t\t\t\tval = { ...val, ...value };\r\n\t\t\t\t\tif (typeof value.view === 'function') {\r\n\t\t\t\t\t\tconst func = value.view;\r\n\t\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\t\tfunc(obj, this.expandRef(tableRef));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// Get all the fields for the create form\r\n\t\t// Get all the fields for the filter form\r\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tObject.keys(fields).forEach(f => {\r\n\t\t\tif (fields[f].create) {\r\n\t\t\t\tcreateFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t\tif (fields[f].filter) {\r\n\t\t\t\tfilterFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tObject.keys(filter).forEach(name => {\r\n\t\t\t\tconst value = filter[name];\r\n\r\n\t\t\t\t// Get the filter field according to the filterName if specified,\r\n\t\t\t\t// otherwise just the name\r\n\t\t\t\tconst ff =\r\n\t\t\t\t\tObject.keys(filterFields)\r\n\t\t\t\t\t\t.map(f => filterFields[f])\r\n\t\t\t\t\t\t.find(f => f.filterName === name) || filterFields[name];\r\n\r\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\r\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name);\r\n\t\t\t\tif (typeof ff.filterValue === 'function') {\r\n\t\t\t\t\tval = ff.filterValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it is an array then we need to check if the value is in the array\r\n\t\t\t\t// Otherwise just use a normal regex check\r\n\t\t\t\tif (_.isArray(value)) {\r\n\t\t\t\t\tif (value.length === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tchecks.push((dataVal: T) => {\r\n\t\t\t\t\t\tconst v = val(dataVal);\r\n\t\t\t\t\t\treturn value.indexOf(v) >= 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchecks.push((dataVal: T) =>\r\n\t\t\t\t\t\tnew RegExp(value, 'i').test(val(dataVal))\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tregsValid = true;\r\n\t\t} catch {\r\n\t\t\tregsValid = false;\r\n\t\t}\r\n\r\n\t\t// Filter out the values according to the filters\r\n\t\t// If the regex isn't valid then we don't want to filter\r\n\t\tconst list = this.props.list.filter(data => {\r\n\t\t\treturn !regsValid || checks.every(check => check(data));\r\n\t\t});\r\n\r\n\t\t// Check how many columns we need for the create and filter form\r\n\t\tconst cols = createTitle && filterTitle ? 2 : 1;\r\n\r\n\t\t// Wrap the provided actions if we have any\r\n\t\tconst origActions = this.props.actions;\r\n\t\tlet actions = origActions;\r\n\t\tif (typeof origActions === 'function') {\r\n\t\t\tactions = (obj, tableRef) => origActions(obj, this.expandRef(tableRef));\r\n\t\t}\r\n\r\n\t\tconst DT = this.createTable();\r\n\r\n\t\tconst createForm = this.renderCreateForm(createTitle, createFields);\r\n\t\tconst filterForm = this.renderFilterForm(\r\n\t\t\tfilterTitle,\r\n\t\t\tfilterFields,\r\n\t\t\tregsValid\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<Grid stackable doubling columns={cols}>\r\n\t\t\t\t\t{createForm}\r\n\t\t\t\t\t{filterForm}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<DT\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\ticon={this.props.icon}\r\n\t\t\t\t\tlist={list}\r\n\t\t\t\t\tidFunc={this.props.idFunc}\r\n\t\t\t\t\tfields={fields}\r\n\t\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\t\tonSave={this.onSave}\r\n\t\t\t\t\tonDelete={this.onDelete}\r\n\t\t\t\t\tcanEdit={this.canEdit}\r\n\t\t\t\t\tcanDelete={this.canDelete}\r\n\t\t\t\t\tactions={actions}\r\n\t\t\t\t\tisEditing={this.isEditing}\r\n\t\t\t\t/>\r\n\t\t\t</Segment>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate createTable() {\r\n\t\treturn DataTable as React.ComponentClass<DataTableProps<T>>;\r\n\t}\r\n\r\n\tprivate expandRef = (tableRef: DataTableRef): DataViewRef<T> => ({\r\n\t\t...tableRef,\r\n\t\tcreate: this.create,\r\n\t\tdetails: this.details,\r\n\t\tsave: this.save,\r\n\t\tedit: this.edit,\r\n\t\tendEdit: this.endEdit,\r\n\t\tdelete: this.delete\r\n\t});\r\n\r\n\tprivate onCreate = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onCreate\r\n\t\t\t? this.props.onCreate(obj, this.expandRef(tableRef))\r\n\t\t\t: this.create(obj);\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onEdit\r\n\t\t\t? this.props.onEdit(obj, this.expandRef(tableRef))\r\n\t\t\t: this.edit(obj);\r\n\t};\r\n\r\n\tprivate onSave = (obj: T, newObj: any, tableRef: DataTableRef) => {\r\n\t\tthis.props.onSave\r\n\t\t\t? this.props.onSave(obj, newObj, this.expandRef(tableRef))\r\n\t\t\t: this.save(obj, newObj);\r\n\t};\r\n\r\n\tprivate onDelete = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onDelete\r\n\t\t\t? this.props.onDelete(obj, this.expandRef(tableRef))\r\n\t\t\t: this.delete(obj);\r\n\t};\r\n\r\n\tprivate canEdit = (obj: T) => {\r\n\t\tconst { canEdit, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canEdit === 'function' ? canEdit(obj) : !!canEdit) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('modify'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate canDelete = (obj: T) => {\r\n\t\tconst { canDelete, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canDelete === 'function' ? canDelete(obj) : !!canDelete) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('delete'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate isEditing = (obj: T) => this.props.equals(obj, this.state.data);\r\n\r\n\tprivate renderCreateForm(\r\n\t\tcreateTitle: string | undefined,\r\n\t\tcreateFields: { [x: string]: DataFieldRaw<T> }\r\n\t) {\r\n\t\tconst { checkCreatePerm, perms, perm, createButton, creating } = this.props;\r\n\t\tif (\r\n\t\t\t!createTitle ||\r\n\t\t\t(checkCreatePerm && !checkPermissions(perms, perm.concat('create')))\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<CreateForm\r\n\t\t\t\t\ttitle={createTitle}\r\n\t\t\t\t\tbutton={createButton}\r\n\t\t\t\t\tcreating={creating}\r\n\t\t\t\t\tfields={createFields}\r\n\t\t\t\t\tonCreate={this.onCreate}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFilterForm(\r\n\t\tfilterTitle: string | undefined,\r\n\t\tfilterFields: { [x: string]: DataFieldRaw<T> },\r\n\t\tregsValid: boolean\r\n\t) {\r\n\t\tif (!filterTitle) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<FilterForm\r\n\t\t\t\t\ttitle={filterTitle}\r\n\t\t\t\t\tfields={filterFields}\r\n\t\t\t\t\tvalid={regsValid}\r\n\t\t\t\t\tvalues={this.props.filter}\r\n\t\t\t\t\tonFilterChange={this.props.setFilter}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\r\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\r\n\t\tconst state: DataViewState<T> = _.get(\r\n\t\t\t_state,\r\n\t\t\tendpoint.replace(/\\//g, '_').replace('-', '')\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tcreating: state ? state.creating : false,\r\n\t\t\tfilter: state && state.filter ? state.filter : {},\r\n\t\t\tlist: state ? state.list : [],\r\n\t\t\ttypes: _state.api.types,\r\n\t\t\tidFunc: id,\r\n\t\t\tperm: endpoint.split('/'),\r\n\t\t\tperms: _state.api.permissions\r\n\t\t};\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps<T>(\r\n\tendpoint: string,\r\n\tid: IdFunction<T>,\r\n\tnoDetails: boolean\r\n) {\r\n\treturn (dispatch: Dispatch<AppAction>) => {\r\n\t\treturn {\r\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\r\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\r\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\r\n\t\t\trequestChange: (data: T, newData: object) =>\r\n\t\t\t\tdispatch(requestChange(endpoint, id, data, newData)),\r\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\r\n\t\t\tsetFilter: (filter: string, value: string) =>\r\n\t\t\t\tdispatch(setFilter(endpoint, filter, value)),\r\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2)\r\n\t\t};\r\n\t};\r\n}\r\n\r\nexport default function createDataView<T>(\r\n\tendpoint: string,\r\n\tobjId: string | IdFunction<T>,\r\n\tnoDetails?: boolean\r\n) {\r\n\tif (!objId) {\r\n\t\tobjId = 'id';\r\n\t}\r\n\tconst id =\r\n\t\ttypeof objId === 'function'\r\n\t\t\t? objId\r\n\t\t\t: (data: T) => _.get(data, objId as string);\r\n\r\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\r\n\t\tmapStateToProps<T>(endpoint, id),\r\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\r\n\t)(DataView as any);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Accordion, Button, Dropdown, Form, Icon } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\ttitle: string;\r\n\tcreating: boolean;\r\n\tonCreate: (data: any, view: DataTableRef) => void;\r\n\tbutton?: string;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n}\r\n\r\ninterface OwnState {\r\n\topen: boolean;\r\n\tnewData: any;\r\n}\r\n\r\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t\tthis.create = this.create.bind(this);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextState.newData !== this.state.newData ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate create() {\r\n\t\tconst data = {};\r\n\t\tObject.keys(this.state.newData).forEach(key => {\r\n\t\t\t_.set(data, key, this.state.newData[key]);\r\n\t\t});\r\n\r\n\t\tthis.props.onCreate(data, {\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: this.setState,\r\n\t\t\thandleChange: this.handleChange\r\n\t\t});\r\n\t}\r\n\r\n\tprivate canCreate(): boolean {\r\n\t\treturn Object.keys(this.props.fields).every(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst key = field.createName ? field.createName : name;\r\n\t\t\treturn (\r\n\t\t\t\ttypeof field === 'string' || !field.required || this.state.newData[key]\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, creating } = this.props;\r\n\r\n\t\tconst _t = this.props.t;\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form loading={creating}>\r\n\t\t\t\t\t\t{this.renderFieldGroups()}\r\n\r\n\t\t\t\t\t\t<Button primary onClick={this.create} disabled={!this.canCreate()}>\r\n\t\t\t\t\t\t\t{this.props.button || _t('Create')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFieldGroups() {\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.createName ? field.createName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn <div key={i}>{this.renderField(fg.only)}</div>;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{fg.first && this.renderField(fg.first)}\r\n\r\n\t\t\t\t\t{fg.second && this.renderField(fg.second)}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst state = this.state.newData;\r\n\r\n\t\tif (typeof field.create === 'function') {\r\n\t\t\treturn field.create({\r\n\t\t\t\tstate: state,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: state[field.name]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid={true}\r\n\t\t\t\t\tselection={true}\r\n\t\t\t\t\tsearch={true}\r\n\t\t\t\t\trequired={field.required}\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tvalue={state[field.name]}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\trequired={field.required}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tname={field.name}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tvalue={state[field.name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withTranslation('CreateForm')(CreateForm);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { Accordion, Dropdown, Form, Icon, Message } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> {\r\n\ttitle: string;\r\n\tvalid: boolean;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n\tvalues: {\r\n\t\t[x: string]: string | string[];\r\n\t};\r\n\tonFilterChange: (key: string, value: string) => void;\r\n}\r\n\r\ninterface State {\r\n\topen: boolean;\r\n}\r\n\r\nclass FilterForm<T> extends React.Component<Props<T>, State> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false\r\n\t\t};\r\n\r\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange);\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: State) {\r\n\t\treturn (\r\n\t\t\tnextProps.values !== this.props.values ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.valid !== this.props.valid ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, fields, values, valid } = this.props;\r\n\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(fields).forEach(name => {\r\n\t\t\tconst field = fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.filterName ? field.filterName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst fs = fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid);\r\n\t\t\t}\r\n\r\n\t\t\tconst first = fg.first\r\n\t\t\t\t? this.renderField(fg.first, _.get(values, fg.first.name), !valid)\r\n\t\t\t\t: null;\r\n\t\t\tconst second = fg.second\r\n\t\t\t\t? this.renderField(fg.second, _.get(values, fg.second.name), !valid)\r\n\t\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{first}\r\n\t\t\t\t\t{second}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t{fs}\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t\tvisible={!valid}\r\n\t\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderField(\r\n\t\tfield: DataFieldRaw<T>,\r\n\t\tvalue: string | string[],\r\n\t\terror: boolean\r\n\t) {\r\n\t\tif (typeof field.filter === 'function') {\r\n\t\t\treturn field.filter({\r\n\t\t\t\tstate: this.props.values,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tvalue = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={field.name}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\terror={error}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FilterForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx","import * as React from 'react';\r\nimport { Button, ButtonProps, Label, Progress } from 'semantic-ui-react';\r\n\r\nimport { Enchantment, ItemStack, PotionEffect } from '../../fetch';\r\nimport { formatRange } from '../Util';\r\n\r\nconst getRoman: (num: number) => string = (num: number) => {\r\n\tif (num === 1) {\r\n\t\treturn 'I';\r\n\t}\r\n\tif (num === 2) {\r\n\t\treturn 'II';\r\n\t}\r\n\tif (num === 3) {\r\n\t\treturn 'III';\r\n\t}\r\n\tif (num === 4) {\r\n\t\treturn 'IV';\r\n\t}\r\n\tif (num === 5) {\r\n\t\treturn 'V';\r\n\t}\r\n\treturn '';\r\n};\r\nconst getAmplifier: (effect: PotionEffect) => string = (effect: PotionEffect) =>\r\n\tgetRoman(effect.amplifier + 1);\r\n\r\nconst itemStackStyle = {\r\n\tdisplay: 'inline-block',\r\n\tverticalAlign: 'top',\r\n\tmargin: '0.1em',\r\n\tpadding: '0.2em',\r\n\tborder: '1px solid rgba(34,36,38,.1)',\r\n\tborderRadius: '.28571429rem'\r\n};\r\n\r\nexport interface Props {\r\n\titem: ItemStack;\r\n\tonRemove?: (\r\n\t\tevent: React.MouseEvent<HTMLButtonElement>,\r\n\t\tdata: ButtonProps\r\n\t) => void;\r\n}\r\n\r\nexport default class extends React.Component<Props> {\r\n\tpublic render() {\r\n\t\tconst { item } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div style={itemStackStyle}>\r\n\t\t\t\t<strong>{item.type.name}</strong>\r\n\t\t\t\t{this.renderRemoveButton()}\r\n\t\t\t\t<div style={{ color: 'gray', marginBottom: '0.5em' }}>\r\n\t\t\t\t\t{item.type.id}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{this.renderDurability()}\r\n\t\t\t\t\t{this.renderQuantity()}\r\n\t\t\t\t\t{this.renderEnchantments()}\r\n\t\t\t\t\t{this.renderSpawn()}\r\n\t\t\t\t\t{this.renderPotionEffects()}\r\n\t\t\t\t\t{this.renderFoodRestoration()}\r\n\t\t\t\t\t{this.renderBurningFuel()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderRemoveButton() {\r\n\t\tif (!this.props.onRemove) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Button\r\n\t\t\t\tcompact\r\n\t\t\t\tnegative\r\n\t\t\t\tsize=\"mini\"\r\n\t\t\t\ticon=\"delete\"\r\n\t\t\t\tfloated=\"right\"\r\n\t\t\t\tonClick={this.props.onRemove}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderDurability() {\r\n\t\tconst { item } = this.props;\r\n\r\n\t\tif (!item.durability) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (item.durability.unbreakable) {\r\n\t\t\treturn <Label size=\"tiny\">Unbreakable</Label>;\r\n\t\t}\r\n\r\n\t\tconst percent = formatRange(\r\n\t\t\titem.durability.durability,\r\n\t\t\titem.useLimit ? item.useLimit : 0\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Progress\r\n\t\t\t\tprogress\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tpercent={percent}\r\n\t\t\t\tstyle={{ margin: '0 0 .5em 0' }}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderQuantity() {\r\n\t\tconst { item } = this.props;\r\n\r\n\t\tif (item.quantity <= 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Label size=\"tiny\" color=\"blue\">\r\n\t\t\t\tx{item.quantity}\r\n\t\t\t</Label>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderEnchantments() {\r\n\t\tconst { item } = this.props;\r\n\t\tif (!item.enchantments) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst renderEnchant = (enchant: Enchantment) => (\r\n\t\t\t<Label color=\"purple\" size=\"tiny\" key={enchant.id}>\r\n\t\t\t\t{enchant.name}\r\n\t\t\t\t<Label.Detail>{enchant.level}</Label.Detail>\r\n\t\t\t</Label>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div>{item.enchantments.map(enchant => renderEnchant(enchant))}</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderSpawn() {\r\n\t\tconst { item } = this.props;\r\n\t\tif (!item.spawn) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn <Label size=\"tiny\">{item.spawn.name}</Label>;\r\n\t}\r\n\r\n\tprivate renderPotionEffects() {\r\n\t\tconst { item } = this.props;\r\n\t\tif (!item.potionEffects) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst renderEffect = (effect: PotionEffect) => (\r\n\t\t\t<Label size=\"tiny\" color=\"brown\" key={effect.type.id}>\r\n\t\t\t\t{effect.type.name} {getAmplifier(effect)}\r\n\t\t\t</Label>\r\n\t\t);\r\n\r\n\t\treturn <div>{item.potionEffects.map(effect => renderEffect(effect))}</div>;\r\n\t}\r\n\r\n\tprivate renderFoodRestoration() {\r\n\t\tconst { item } = this.props;\r\n\t\tif (!item.foodRestoration) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Label\r\n\t\t\t\tsize=\"tiny\"\r\n\t\t\t\tcolor=\"green\"\r\n\t\t\t\ticon=\"food\"\r\n\t\t\t\tcontent={item.foodRestoration}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderBurningFuel() {\r\n\t\tconst { item } = this.props;\r\n\t\tif (!item.burningFuel) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Label size=\"tiny\" color=\"red\" icon=\"fire\" content={item.burningFuel} />\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ItemStack/index.tsx"],"sourceRoot":""}