{"version":3,"sources":["views/ServerSettings/index.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_6__components_DataView__","ServerSettings","_super","_this","apply","this","arguments","canEdit","obj","__WEBPACK_IMPORTED_MODULE_7__components_Util__","props","perms","key","onSave","data","newData","view","requestSaveProperty","__assign","value","endEdit","__extends","prototype","render","t","fields","label","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","color","name","edit","Radio","toggle","checked","state","onChange","setState","Input","type","placeholder","handleChange","note","hideNote","basic","info","onDismiss","doHideNote","Header","icon","title","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","api","permissions","preferences","hideServerSettingsNote","dispatch","prop","__WEBPACK_IMPORTED_MODULE_5__actions_server_settings__","__WEBPACK_IMPORTED_MODULE_4__actions_preferences__","__WEBPACK_IMPORTED_MODULE_8__types__","__WEBPACK_IMPORTED_MODULE_1_react_i18next__","DataTable","call","changePage","event","page","preventDefault","onEdit","keys","forEach","__WEBPACK_IMPORTED_MODULE_0_lodash__","bind","doHandleChange","__WEBPACK_IMPORTED_MODULE_5__Util__","_a","shouldComponentUpdate","nextProps","nextState","list","canDelete","actions","map","f","filter","maxPage","Math","ceil","length","min","_t","editable","deletable","__WEBPACK_IMPORTED_MODULE_1_react__","style","marginTop","renderHeader","striped","stackable","__WEBPACK_IMPORTED_MODULE_7__TableHeader__","hasActions","i18n","__WEBPACK_IMPORTED_MODULE_4__services_i18n__","Body","renderRows","__WEBPACK_IMPORTED_MODULE_6__Pagination__","fitted","listPage","slice","thisRef","changes","i","__WEBPACK_IMPORTED_MODULE_8__TableRow__","idFunc","tableRef","actionable","editing","isEditing","onDelete","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","Pagination","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","renderFirst","renderPrevMore","renderMain","renderNextMore","renderLast","Item","onClick","e","from","max","to","pages","push","p","active","DataTableHeader","Row","renderFields","renderActions","field","HeaderCell","TableRow","onEditEmpty","undefined","j","Cell","collapsing","wide","renderField","renderEdit","__WEBPACK_IMPORTED_MODULE_2__Util__","col","options","Field","fluid","selection","search","control","_canEdit","_canDelete","primary","disabled","updating","loading","secondary","del","negative","endpoint","objId","noDetails","id","_state","ownProps","replace","creating","types","perm","split","mapStateToProps","requestList","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","expandRef","create","details","save","delete","onCreate","newObj","__WEBPACK_IMPORTED_MODULE_8__Util__","concat","componentDidMount","static","interval","setInterval","componentWillUnmount","clearInterval","createTitle","filterTitle","checks","regsValid","val","func_1","createFields","filterFields","ff","find","filterName","dataVal","filterValue","v","indexOf","RegExp","test","_b","every","check","cols","origActions","DT","createTable","createForm","renderCreateForm","filterForm","renderFilterForm","doubling","columns","__WEBPACK_IMPORTED_MODULE_6__DataTable__","checkCreatePerm","createButton","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","CreateForm","handleClick","open","__WEBPACK_IMPORTED_MODULE_4__Util__","canCreate","createName","required","styled","Title","Content","renderFieldGroups","fieldGroups","newField","isGroup","only","second","first","fg","Group","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","fs","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","content","multiple"],"mappings":"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","file":"static/js/16.d9402ff1.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Form, Icon, Message, Segment } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../actions';\r\nimport { setPreference } from '../../actions/preferences';\r\nimport { requestSaveProperty } from '../../actions/server-settings';\r\nimport DataViewFunc, { DataViewFields } from '../../components/DataView';\r\nimport { checkPermissions } from '../../components/Util';\r\nimport {\r\n\tAppState,\r\n\tDataViewRef,\r\n\tEServerProperty,\r\n\tPermissionTree,\r\n\tPreferenceKey\r\n} from '../../types';\r\n\r\n// tslint:disable-next-line:variable-name\r\nconst DataView = DataViewFunc('server/properties', 'key');\r\n\r\ninterface OwnProps {\r\n\tperms?: PermissionTree;\r\n\thideNote: boolean;\r\n}\r\n\r\ninterface Props extends OwnProps, WithTranslation {\r\n\trequestSaveProperty: (prop: EServerProperty) => AppAction;\r\n\tdoHideNote: () => AppAction;\r\n}\r\n\r\ninterface OwnState {}\r\n\r\nclass ServerSettings extends React.Component<Props, OwnState> {\r\n\tpublic render() {\r\n\t\tconst { t } = this.props;\r\n\r\n\t\tconst fields: DataViewFields<EServerProperty> = {\r\n\t\t\tkey: {\r\n\t\t\t\tlabel: t('Key')\r\n\t\t\t},\r\n\t\t\tvalue: {\r\n\t\t\t\tlabel: t('Value'),\r\n\t\t\t\tview: obj => {\r\n\t\t\t\t\tif (obj.value === 'true' || obj.value === 'false') {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tcolor={obj.value === 'true' ? 'green' : 'red'}\r\n\t\t\t\t\t\t\t\tname={obj.value === 'true' ? 'check' : 'delete'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj.value;\r\n\t\t\t\t},\r\n\t\t\t\tedit: (obj, view) => {\r\n\t\t\t\t\tif (obj.value === 'true' || obj.value === 'false') {\r\n\t\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t\tview.setState({\r\n\t\t\t\t\t\t\t\tvalue: view.state.value === 'true' ? 'false' : 'true'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Form.Radio\r\n\t\t\t\t\t\t\t\ttoggle\r\n\t\t\t\t\t\t\t\tname=\"value\"\r\n\t\t\t\t\t\t\t\tchecked={view.state.value === 'true'}\r\n\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Form.Input\r\n\t\t\t\t\t\t\tname=\"value\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Value\"\r\n\t\t\t\t\t\t\tvalue={view.state.value}\r\n\t\t\t\t\t\t\tonChange={view.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst note = !this.props.hideNote && (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<Message info onDismiss={this.props.doHideNote}>\r\n\t\t\t\t\t<Message.Header>{t('InfoTitle')}</Message.Header>\r\n\t\t\t\t\t<p>{t('InfoText')}</p>\r\n\t\t\t\t</Message>\r\n\t\t\t</Segment>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{note}\r\n\r\n\t\t\t\t<DataView\r\n\t\t\t\t\tcanEdit={this.canEdit}\r\n\t\t\t\t\ticon=\"cogs\"\r\n\t\t\t\t\ttitle={t('ServerSettings')}\r\n\t\t\t\t\tfields={fields}\r\n\t\t\t\t\tonSave={this.onSave}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate canEdit = (obj: EServerProperty) => {\r\n\t\treturn checkPermissions(this.props.perms, [\r\n\t\t\t'server',\r\n\t\t\t'properties',\r\n\t\t\t'modify',\r\n\t\t\tobj.key\r\n\t\t]);\r\n\t};\r\n\r\n\tprivate onSave = (\r\n\t\tdata: EServerProperty,\r\n\t\tnewData: any,\r\n\t\tview: DataViewRef<EServerProperty>\r\n\t) => {\r\n\t\tthis.props.requestSaveProperty({\r\n\t\t\t...data,\r\n\t\t\tvalue: newData.value\r\n\t\t});\r\n\t\tview.endEdit();\r\n\t};\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): OwnProps => {\r\n\treturn {\r\n\t\tperms: state.api.permissions,\r\n\t\thideNote: state.preferences.hideServerSettingsNote\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\r\n\treturn {\r\n\t\trequestSaveProperty: (prop: EServerProperty): AppAction =>\r\n\t\t\tdispatch(requestSaveProperty(prop)),\r\n\t\tdoHideNote: (): AppAction =>\r\n\t\t\tdispatch(setPreference(PreferenceKey.hideServerSettingsNote, true))\r\n\t};\r\n};\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withTranslation('ServerSettings')(ServerSettings));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/ServerSettings/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Header, Icon, SemanticICONS, Table } from 'semantic-ui-react';\r\n\r\nimport i18n from '../../services/i18n';\r\nimport { DataFieldRaw, DataTableRef, IdFunction } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nimport Pagination from './Pagination';\r\nimport TableHeader from './TableHeader';\r\nimport TableRow from './TableRow';\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport type DataTableFields<T> = {\r\n\t[key: string]: DataFieldRaw<T>;\r\n};\r\n\r\nexport interface Props<T> {\r\n\ttitle?: string;\r\n\ticon?: SemanticICONS;\r\n\tlist: T[];\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tfields: DataTableFields<T>;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\tonEdit?: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tidFunc: IdFunction<T>;\r\n\tisEditing: (data: T) => boolean;\r\n}\r\n\r\ninterface AllProps<T> extends Props<T>, WithTranslation {}\r\n\r\ninterface OwnState {\r\n\tpage: number;\r\n\tnewData: any;\r\n}\r\n\r\nclass DataTable<T> extends React.Component<AllProps<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: AllProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.changePage = this.changePage.bind(this);\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate changePage = (event: React.MouseEvent<HTMLElement>, page: number) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\tpage: page\r\n\t\t});\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T | undefined, view: DataTableRef): void => {\r\n\t\tconst newData = {};\r\n\t\tif (obj) {\r\n\t\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\t\tif (!this.props.fields[name].edit) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnewData[name] = _.get(obj, name);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tnewData: newData\r\n\t\t});\r\n\r\n\t\tif (this.props.onEdit) {\r\n\t\t\tthis.props.onEdit(obj, view);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.page !== this.state.page ||\r\n\t\t\tnextState.newData !== this.state.newData\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { list, canEdit, canDelete, actions } = this.props;\r\n\t\tconst fields = Object.keys(this.props.fields)\r\n\t\t\t.map(f => this.props.fields[f])\r\n\t\t\t.filter(f => f.view);\r\n\r\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE);\r\n\t\tconst page = Math.min(this.state.page, maxPage - 1);\r\n\r\n\t\tconst _t = this.props.t;\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ marginTop: '2em' }}>\r\n\t\t\t\t{this.renderHeader()}\r\n\r\n\t\t\t\t<Table striped={true} stackable>\r\n\t\t\t\t\t<TableHeader\r\n\t\t\t\t\t\tfields={fields}\r\n\t\t\t\t\t\thasActions={typeof actions !== typeof undefined}\r\n\t\t\t\t\t\tcanEdit={editable}\r\n\t\t\t\t\t\tcanDelete={deletable}\r\n\t\t\t\t\t\ti18n={i18n}\r\n\t\t\t\t\t\tt={_t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Table.Body>{this.renderRows(fields, page)}</Table.Body>\r\n\t\t\t\t</Table>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tmaxPage={maxPage}\r\n\t\t\t\t\tchangePage={this.changePage}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderHeader() {\r\n\t\tconst { icon, title } = this.props;\r\n\r\n\t\tif (!title) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t<Icon fitted name={icon} /> {title}\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderRows(fields: DataFieldRaw<T>[], page: number) {\r\n\t\tconst { list, canEdit, canDelete, actions, t } = this.props;\r\n\r\n\t\tconst listPage = list.slice(\r\n\t\t\tpage * ITEMS_PER_PAGE,\r\n\t\t\t(page + 1) * ITEMS_PER_PAGE\r\n\t\t);\r\n\r\n\t\tconst thisRef: DataTableRef = {\r\n\t\t\thandleChange: this.handleChange,\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: (changes: object) =>\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewData: { ...this.state.newData, ...changes }\r\n\t\t\t\t})\r\n\t\t};\r\n\r\n\t\tconst editable = _.some(list, canEdit);\r\n\t\tconst deletable = _.some(list, canDelete);\r\n\r\n\t\treturn listPage.map((obj, i) => (\r\n\t\t\t<TableRow\r\n\t\t\t\tkey={this.props.idFunc(obj)}\r\n\t\t\t\tobj={obj}\r\n\t\t\t\ttableRef={thisRef}\r\n\t\t\t\tactionable={editable || deletable}\r\n\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\tcanDelete={canDelete}\r\n\t\t\t\tediting={this.props.isEditing(obj)}\r\n\t\t\t\tfields={fields}\r\n\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\tonSave={this.props.onSave}\r\n\t\t\t\tonDelete={this.props.onDelete}\r\n\t\t\t\tactions={actions}\r\n\t\t\t\tnewData={this.state.newData}\r\n\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\ti18n={i18n}\r\n\t\t\t\tt={t}\r\n\t\t\t/>\r\n\t\t));\r\n\t}\r\n}\r\n\r\nexport default withTranslation('DataTable')(DataTable);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\n\r\nexport interface Props {\r\n\tpage: number;\r\n\tmaxPage: number;\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void;\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\tpublic shouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{this.renderFirst()}\r\n\t\t\t\t{this.renderPrevMore()}\r\n\t\t\t\t{this.renderMain()}\r\n\t\t\t\t{this.renderNextMore()}\r\n\t\t\t\t{this.renderLast()}\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFirst() {\r\n\t\tif (this.props.page <= 4) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\treturn <Menu.Item onClick={e => this.props.changePage(e, 0)}>1</Menu.Item>;\r\n\t}\r\n\r\n\tprivate renderPrevMore() {\r\n\t\tif (this.props.page <= 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page - 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderMain() {\r\n\t\tconst { page, maxPage } = this.props;\r\n\t\tconst from = Math.max(0, page - 4);\r\n\t\tconst to = Math.min(maxPage, page + 5);\r\n\r\n\t\tconst pages = [];\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i);\r\n\t\t}\r\n\r\n\t\treturn pages.map(p => (\r\n\t\t\t<Menu.Item\r\n\t\t\t\tkey={p}\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, p)}\r\n\t\t\t\tactive={p === page}\r\n\t\t\t>\r\n\t\t\t\t{p + 1}\r\n\t\t\t</Menu.Item>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderNextMore() {\r\n\t\tif (this.props.page >= this.props.maxPage - 6) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t<Menu.Item onClick={e => this.props.changePage(e, this.props.page + 5)}>\r\n\t\t\t\t...\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderLast() {\r\n\t\tif (this.props.page >= this.props.maxPage - 5) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu.Item\r\n\t\t\t\t// tslint:disable-next-line:jsx-no-lambda\r\n\t\t\t\tonClick={e => this.props.changePage(e, this.props.maxPage - 1)}\r\n\t\t\t>\r\n\t\t\t\t{this.props.maxPage}\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw } from '../../types';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\thasActions: boolean;\r\n\tcanEdit?: boolean;\r\n\tcanDelete?: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields;\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{this.renderFields()}\r\n\t\t\t\t\t{this.renderActions()}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\treturn Object.keys(this.props.fields).map(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\treturn (\r\n\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t{field.label ? field.label : '<' + field.name + '>'}\r\n\t\t\t\t</Table.HeaderCell>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tif (\r\n\t\t\t!this.props.hasActions &&\r\n\t\t\t!this.props.canEdit &&\r\n\t\t\t!this.props.canDelete\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn <Table.HeaderCell>{this.props.t('Actions')}</Table.HeaderCell>;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from 'react';\r\nimport { WithTranslation } from 'react-i18next';\r\nimport { Button, Dropdown, Form, Icon, Table } from 'semantic-ui-react';\r\n\r\nimport { DataFieldRaw, DataTableRef } from '../../types';\r\nimport { get, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\tobj: T;\r\n\ttableRef: DataTableRef;\r\n\tactionable: boolean;\r\n\tcanEdit?: (data: T) => boolean;\r\n\tcanDelete?: (data: T) => boolean;\r\n\tediting: boolean;\r\n\tfields: DataFieldRaw<T>[];\r\n\tonEdit: (data: T | undefined, view: DataTableRef) => void;\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void;\r\n\tonDelete?: (data: T, view: DataTableRef) => void;\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element | undefined;\r\n\thandleChange: HandleChangeFunc;\r\n\tnewData: any;\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn (\r\n\t\t\tnextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onSave = () => {\r\n\t\tconst { obj, tableRef } = this.props;\r\n\r\n\t\tif (this.props.onSave) {\r\n\t\t\tthis.props.onSave(obj, this.props.newData, tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate onEditEmpty = () => {\r\n\t\tthis.props.onEdit(undefined, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onEdit = () => {\r\n\t\tthis.props.onEdit(this.props.obj, this.props.tableRef);\r\n\t};\r\n\r\n\tprivate onDelete = () => {\r\n\t\tif (this.props.onDelete) {\r\n\t\t\tthis.props.onDelete(this.props.obj, this.props.tableRef);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{this.renderFields()}\r\n\t\t\t\t{this.renderActions()}\r\n\t\t\t</Table.Row>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFields() {\r\n\t\tconst { fields } = this.props;\r\n\r\n\t\treturn fields.map((field, j) => (\r\n\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t{this.renderField(field)}\r\n\t\t\t</Table.Cell>\r\n\t\t));\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst { obj, editing, tableRef } = this.props;\r\n\r\n\t\treturn field.edit && editing\r\n\t\t\t? typeof field.edit === 'function'\r\n\t\t\t\t? field.edit(obj, tableRef)\r\n\t\t\t\t: this.renderEdit(obj, field)\r\n\t\t\t: typeof field.view === 'function'\r\n\t\t\t? field.view(obj, tableRef)\r\n\t\t\t: get(obj, field.name);\r\n\t}\r\n\r\n\tprivate renderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : 'text'}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderActions() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tobj,\r\n\t\t\tactionable,\r\n\t\t\tcanEdit,\r\n\t\t\tcanDelete,\r\n\t\t\tediting,\r\n\t\t\ttableRef\r\n\t\t} = this.props;\r\n\r\n\t\tconst _canEdit = typeof canEdit === 'function' ? canEdit(obj) : canEdit;\r\n\t\tconst _canDelete =\r\n\t\t\ttypeof canDelete === 'function' ? canDelete(obj) : canEdit;\r\n\r\n\t\tif (!actions && !actionable) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet edit = null;\r\n\t\tif (_canEdit && editing) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onSave}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t('Save')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEditEmpty}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t} else if (_canEdit) {\r\n\t\t\tedit = (\r\n\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\tonClick={this.onEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t('Edit')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Table.Cell>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet del = null;\r\n\t\tif (_canDelete) {\r\n\t\t\tdel = (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tnegative\r\n\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\tonClick={this.onDelete}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t('Remove')}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t{edit}\r\n\t\t\t\t{del}\r\n\t\t\t\t{actions ? actions(obj, tableRef) : null}\r\n\t\t\t</Table.Cell>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Dispatch } from 'redux';\r\nimport { Grid, Segment } from 'semantic-ui-react';\r\n\r\nimport { AppAction } from '../../actions';\r\nimport {\r\n\trequestChange,\r\n\trequestCreate,\r\n\trequestDelete,\r\n\trequestDetails,\r\n\trequestList,\r\n\tsetFilter\r\n} from '../../actions/dataview';\r\nimport { DataViewState } from '../../reducers/dataview';\r\nimport {\r\n\tAppState,\r\n\tDataFieldRaw,\r\n\tDataTableRef,\r\n\tDataViewRef,\r\n\tIdFunction\r\n} from '../../types';\r\nimport CreateForm from '../CreateForm';\r\nimport DataTable, { Props as DataTableProps } from '../DataTable';\r\nimport FilterForm from '../FilterForm';\r\nimport { checkPermissions } from '../Util';\r\n\r\nimport {\r\n\tDispatchProps,\r\n\tFullProps,\r\n\tOwnProps,\r\n\tOwnState,\r\n\tStateProps\r\n} from './types';\r\nexport { DataViewFields } from './types';\r\n\r\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\r\n\tprivate interval: NodeJS.Timer;\r\n\r\n\tpublic constructor(props: FullProps<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpage: 0,\r\n\t\t\tdata: undefined\r\n\t\t};\r\n\r\n\t\tthis.details = this.details.bind(this);\r\n\t\tthis.create = this.create.bind(this);\r\n\t\tthis.edit = this.edit.bind(this);\r\n\t\tthis.endEdit = this.endEdit.bind(this);\r\n\t\tthis.save = this.save.bind(this);\r\n\t\tthis.delete = this.delete.bind(this);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tif (!this.props.static) {\r\n\t\t\tthis.props.requestList();\r\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic componentWillUnmount() {\r\n\t\tif (this.interval) {\r\n\t\t\tclearInterval(this.interval);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(\r\n\t\tnextProps: FullProps<T>,\r\n\t\tnextState: OwnState<T>\r\n\t) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.filter !== this.props.filter ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.list !== this.props.list ||\r\n\t\t\tnextState.data !== this.state.data\r\n\t\t);\r\n\t}\r\n\r\n\t// Create a new data entry\r\n\tprivate create(data: T) {\r\n\t\tthis.props.requestCreate(data);\r\n\t}\r\n\r\n\t// Get the details for a data entry\r\n\tprivate details(data: T) {\r\n\t\tthis.props.requestDetails(data);\r\n\t}\r\n\r\n\t// Select a data entry for editing\r\n\tprivate edit(data: T | undefined) {\r\n\t\tthis.setState({ data });\r\n\t}\r\n\r\n\t// Save/Update an existing data entry\r\n\tprivate save(data: T, newData: any) {\r\n\t\tthis.props.requestChange(data, newData);\r\n\t\tthis.endEdit();\r\n\t}\r\n\r\n\t// End editing an entry\r\n\tprivate endEdit() {\r\n\t\tthis.setState({\r\n\t\t\tdata: undefined\r\n\t\t});\r\n\t}\r\n\r\n\t// Delete a data entry\r\n\tprivate delete(data: T) {\r\n\t\tthis.props.requestDelete(data);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst { filter, title, createTitle, filterTitle } = this.props;\r\n\r\n\t\tconst checks: ((val: T) => boolean)[] = [];\r\n\t\tlet regsValid = false;\r\n\r\n\t\t// Get all the fields of the table\r\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(\r\n\t\t\tthis.props.fields,\r\n\t\t\t(value, name) => {\r\n\t\t\t\tlet val: DataFieldRaw<T> = {\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tview: true\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// If the column is a string use that as the label\r\n\t\t\t\t// If the column is a function, use that function to display the cell\r\n\t\t\t\t// else if the column provides a view function then use that to display the cell\r\n\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\tval.label = value;\r\n\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\tvalue(obj, this.expandRef(tableRef));\r\n\t\t\t\t} else if (typeof value === 'object') {\r\n\t\t\t\t\tval = { ...val, ...value };\r\n\t\t\t\t\tif (typeof value.view === 'function') {\r\n\t\t\t\t\t\tconst func = value.view;\r\n\t\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) =>\r\n\t\t\t\t\t\t\tfunc(obj, this.expandRef(tableRef));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// Get all the fields for the create form\r\n\t\t// Get all the fields for the filter form\r\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {};\r\n\t\tObject.keys(fields).forEach(f => {\r\n\t\t\tif (fields[f].create) {\r\n\t\t\t\tcreateFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t\tif (fields[f].filter) {\r\n\t\t\t\tfilterFields[f] = fields[f];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tObject.keys(filter).forEach(name => {\r\n\t\t\t\tconst value = filter[name];\r\n\r\n\t\t\t\t// Get the filter field according to the filterName if specified,\r\n\t\t\t\t// otherwise just the name\r\n\t\t\t\tconst ff =\r\n\t\t\t\t\tObject.keys(filterFields)\r\n\t\t\t\t\t\t.map(f => filterFields[f])\r\n\t\t\t\t\t\t.find(f => f.filterName === name) || filterFields[name];\r\n\r\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\r\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name);\r\n\t\t\t\tif (typeof ff.filterValue === 'function') {\r\n\t\t\t\t\tval = ff.filterValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it is an array then we need to check if the value is in the array\r\n\t\t\t\t// Otherwise just use a normal regex check\r\n\t\t\t\tif (_.isArray(value)) {\r\n\t\t\t\t\tif (value.length === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tchecks.push((dataVal: T) => {\r\n\t\t\t\t\t\tconst v = val(dataVal);\r\n\t\t\t\t\t\treturn value.indexOf(v) >= 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchecks.push((dataVal: T) =>\r\n\t\t\t\t\t\tnew RegExp(value, 'i').test(val(dataVal))\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tregsValid = true;\r\n\t\t} catch {\r\n\t\t\tregsValid = false;\r\n\t\t}\r\n\r\n\t\t// Filter out the values according to the filters\r\n\t\t// If the regex isn't valid then we don't want to filter\r\n\t\tconst list = this.props.list.filter(data => {\r\n\t\t\treturn !regsValid || checks.every(check => check(data));\r\n\t\t});\r\n\r\n\t\t// Check how many columns we need for the create and filter form\r\n\t\tconst cols = createTitle && filterTitle ? 2 : 1;\r\n\r\n\t\t// Wrap the provided actions if we have any\r\n\t\tconst origActions = this.props.actions;\r\n\t\tlet actions = origActions;\r\n\t\tif (typeof origActions === 'function') {\r\n\t\t\tactions = (obj, tableRef) => origActions(obj, this.expandRef(tableRef));\r\n\t\t}\r\n\r\n\t\tconst DT = this.createTable();\r\n\r\n\t\tconst createForm = this.renderCreateForm(createTitle, createFields);\r\n\t\tconst filterForm = this.renderFilterForm(\r\n\t\t\tfilterTitle,\r\n\t\t\tfilterFields,\r\n\t\t\tregsValid\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<Grid stackable doubling columns={cols}>\r\n\t\t\t\t\t{createForm}\r\n\t\t\t\t\t{filterForm}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<DT\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\ticon={this.props.icon}\r\n\t\t\t\t\tlist={list}\r\n\t\t\t\t\tidFunc={this.props.idFunc}\r\n\t\t\t\t\tfields={fields}\r\n\t\t\t\t\tonEdit={this.onEdit}\r\n\t\t\t\t\tonSave={this.onSave}\r\n\t\t\t\t\tonDelete={this.onDelete}\r\n\t\t\t\t\tcanEdit={this.canEdit}\r\n\t\t\t\t\tcanDelete={this.canDelete}\r\n\t\t\t\t\tactions={actions}\r\n\t\t\t\t\tisEditing={this.isEditing}\r\n\t\t\t\t/>\r\n\t\t\t</Segment>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate createTable() {\r\n\t\treturn DataTable as React.ComponentClass<DataTableProps<T>>;\r\n\t}\r\n\r\n\tprivate expandRef = (tableRef: DataTableRef): DataViewRef<T> => ({\r\n\t\t...tableRef,\r\n\t\tcreate: this.create,\r\n\t\tdetails: this.details,\r\n\t\tsave: this.save,\r\n\t\tedit: this.edit,\r\n\t\tendEdit: this.endEdit,\r\n\t\tdelete: this.delete\r\n\t});\r\n\r\n\tprivate onCreate = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onCreate\r\n\t\t\t? this.props.onCreate(obj, this.expandRef(tableRef))\r\n\t\t\t: this.create(obj);\r\n\t};\r\n\r\n\tprivate onEdit = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onEdit\r\n\t\t\t? this.props.onEdit(obj, this.expandRef(tableRef))\r\n\t\t\t: this.edit(obj);\r\n\t};\r\n\r\n\tprivate onSave = (obj: T, newObj: any, tableRef: DataTableRef) => {\r\n\t\tthis.props.onSave\r\n\t\t\t? this.props.onSave(obj, newObj, this.expandRef(tableRef))\r\n\t\t\t: this.save(obj, newObj);\r\n\t};\r\n\r\n\tprivate onDelete = (obj: T, tableRef: DataTableRef) => {\r\n\t\tthis.props.onDelete\r\n\t\t\t? this.props.onDelete(obj, this.expandRef(tableRef))\r\n\t\t\t: this.delete(obj);\r\n\t};\r\n\r\n\tprivate canEdit = (obj: T) => {\r\n\t\tconst { canEdit, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canEdit === 'function' ? canEdit(obj) : !!canEdit) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('modify'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate canDelete = (obj: T) => {\r\n\t\tconst { canDelete, perms, perm } = this.props;\r\n\t\treturn (\r\n\t\t\t(typeof canDelete === 'function' ? canDelete(obj) : !!canDelete) &&\r\n\t\t\tcheckPermissions(perms, perm.concat('delete'))\r\n\t\t);\r\n\t};\r\n\r\n\tprivate isEditing = (obj: T) => this.props.equals(obj, this.state.data);\r\n\r\n\tprivate renderCreateForm(\r\n\t\tcreateTitle: string | undefined,\r\n\t\tcreateFields: { [x: string]: DataFieldRaw<T> }\r\n\t) {\r\n\t\tconst { checkCreatePerm, perms, perm, createButton, creating } = this.props;\r\n\t\tif (\r\n\t\t\t!createTitle ||\r\n\t\t\t(checkCreatePerm && !checkPermissions(perms, perm.concat('create')))\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<CreateForm\r\n\t\t\t\t\ttitle={createTitle}\r\n\t\t\t\t\tbutton={createButton}\r\n\t\t\t\t\tcreating={creating}\r\n\t\t\t\t\tfields={createFields}\r\n\t\t\t\t\tonCreate={this.onCreate}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFilterForm(\r\n\t\tfilterTitle: string | undefined,\r\n\t\tfilterFields: { [x: string]: DataFieldRaw<T> },\r\n\t\tregsValid: boolean\r\n\t) {\r\n\t\tif (!filterTitle) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<FilterForm\r\n\t\t\t\t\ttitle={filterTitle}\r\n\t\t\t\t\tfields={filterFields}\r\n\t\t\t\t\tvalid={regsValid}\r\n\t\t\t\t\tvalues={this.props.filter}\r\n\t\t\t\t\tonFilterChange={this.props.setFilter}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\r\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\r\n\t\tconst state: DataViewState<T> = _.get(\r\n\t\t\t_state,\r\n\t\t\tendpoint.replace(/\\//g, '_').replace('-', '')\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tcreating: state ? state.creating : false,\r\n\t\t\tfilter: state && state.filter ? state.filter : {},\r\n\t\t\tlist: state ? state.list : [],\r\n\t\t\ttypes: _state.api.types,\r\n\t\t\tidFunc: id,\r\n\t\t\tperm: endpoint.split('/'),\r\n\t\t\tperms: _state.api.permissions\r\n\t\t};\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps<T>(\r\n\tendpoint: string,\r\n\tid: IdFunction<T>,\r\n\tnoDetails: boolean\r\n) {\r\n\treturn (dispatch: Dispatch<AppAction>) => {\r\n\t\treturn {\r\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\r\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\r\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\r\n\t\t\trequestChange: (data: T, newData: object) =>\r\n\t\t\t\tdispatch(requestChange(endpoint, id, data, newData)),\r\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\r\n\t\t\tsetFilter: (filter: string, value: string) =>\r\n\t\t\t\tdispatch(setFilter(endpoint, filter, value)),\r\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2)\r\n\t\t};\r\n\t};\r\n}\r\n\r\nexport default function createDataView<T>(\r\n\tendpoint: string,\r\n\tobjId: string | IdFunction<T>,\r\n\tnoDetails?: boolean\r\n) {\r\n\tif (!objId) {\r\n\t\tobjId = 'id';\r\n\t}\r\n\tconst id =\r\n\t\ttypeof objId === 'function'\r\n\t\t\t? objId\r\n\t\t\t: (data: T) => _.get(data, objId as string);\r\n\r\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\r\n\t\tmapStateToProps<T>(endpoint, id),\r\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\r\n\t)(DataView as any);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Accordion, Button, Dropdown, Form, Icon } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> extends WithTranslation {\r\n\ttitle: string;\r\n\tcreating: boolean;\r\n\tonCreate: (data: any, view: DataTableRef) => void;\r\n\tbutton?: string;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n}\r\n\r\ninterface OwnState {\r\n\topen: boolean;\r\n\tnewData: any;\r\n}\r\n\r\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tnewData: {}\r\n\t\t};\r\n\r\n\t\tthis.doHandleChange = this.doHandleChange.bind(this);\r\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange);\r\n\t\tthis.create = this.create.bind(this);\r\n\t}\r\n\r\n\tprivate doHandleChange(key: string, value: string) {\r\n\t\tthis.setState({\r\n\t\t\tnewData: {\r\n\t\t\t\t...this.state.newData,\r\n\t\t\t\t[key]: value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\r\n\t\treturn (\r\n\t\t\tnextProps.creating !== this.props.creating ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextState.newData !== this.state.newData ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate create() {\r\n\t\tconst data = {};\r\n\t\tObject.keys(this.state.newData).forEach(key => {\r\n\t\t\t_.set(data, key, this.state.newData[key]);\r\n\t\t});\r\n\r\n\t\tthis.props.onCreate(data, {\r\n\t\t\tstate: this.state.newData,\r\n\t\t\tsetState: this.setState,\r\n\t\t\thandleChange: this.handleChange\r\n\t\t});\r\n\t}\r\n\r\n\tprivate canCreate(): boolean {\r\n\t\treturn Object.keys(this.props.fields).every(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst key = field.createName ? field.createName : name;\r\n\t\t\treturn (\r\n\t\t\t\ttypeof field === 'string' || !field.required || this.state.newData[key]\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, creating } = this.props;\r\n\r\n\t\tconst _t = this.props.t;\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form loading={creating}>\r\n\t\t\t\t\t\t{this.renderFieldGroups()}\r\n\r\n\t\t\t\t\t\t<Button primary onClick={this.create} disabled={!this.canCreate()}>\r\n\t\t\t\t\t\t\t{this.props.button || _t('Create')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderFieldGroups() {\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(this.props.fields).forEach(name => {\r\n\t\t\tconst field = this.props.fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.createName ? field.createName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn <div key={i}>{this.renderField(fg.only)}</div>;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{fg.first && this.renderField(fg.first)}\r\n\r\n\t\t\t\t\t{fg.second && this.renderField(fg.second)}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderField(field: DataFieldRaw<T>) {\r\n\t\tconst state = this.state.newData;\r\n\r\n\t\tif (typeof field.create === 'function') {\r\n\t\t\treturn field.create({\r\n\t\t\t\tstate: state,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: state[field.name]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid={true}\r\n\t\t\t\t\tselection={true}\r\n\t\t\t\t\tsearch={true}\r\n\t\t\t\t\trequired={field.required}\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tvalue={state[field.name]}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\trequired={field.required}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tname={field.name}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tvalue={state[field.name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withTranslation('CreateForm')(CreateForm);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { Accordion, Dropdown, Form, Icon, Message } from 'semantic-ui-react';\r\n\r\nimport { DataFieldGroup, DataFieldRaw } from '../../types';\r\nimport { handleChange, HandleChangeFunc } from '../Util';\r\n\r\nexport interface Props<T> {\r\n\ttitle: string;\r\n\tvalid: boolean;\r\n\tfields: {\r\n\t\t[x: string]: DataFieldRaw<T>;\r\n\t};\r\n\tvalues: {\r\n\t\t[x: string]: string | string[];\r\n\t};\r\n\tonFilterChange: (key: string, value: string) => void;\r\n}\r\n\r\ninterface State {\r\n\topen: boolean;\r\n}\r\n\r\nclass FilterForm<T> extends React.Component<Props<T>, State> {\r\n\tprivate handleChange: HandleChangeFunc;\r\n\r\n\tpublic constructor(props: Props<T>) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: false\r\n\t\t};\r\n\r\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange);\r\n\t}\r\n\r\n\tpublic shouldComponentUpdate(nextProps: Props<T>, nextState: State) {\r\n\t\treturn (\r\n\t\t\tnextProps.values !== this.props.values ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\tnextProps.valid !== this.props.valid ||\r\n\t\t\tnextState.open !== this.state.open\r\n\t\t);\r\n\t}\r\n\r\n\tprivate handleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\tconst { title, fields, values, valid } = this.props;\r\n\r\n\t\tconst fieldGroups: DataFieldGroup<T>[] = [];\r\n\t\tObject.keys(fields).forEach(name => {\r\n\t\t\tconst field = fields[name];\r\n\t\t\tconst newField: DataFieldRaw<T> = {\r\n\t\t\t\t...field,\r\n\t\t\t\tname: field.filterName ? field.filterName : name\r\n\t\t\t};\r\n\r\n\t\t\tif (newField.isGroup) {\r\n\t\t\t\tfieldGroups.push({ only: newField });\r\n\t\t\t} else if (\r\n\t\t\t\tfieldGroups.length &&\r\n\t\t\t\t!fieldGroups[fieldGroups.length - 1].second\r\n\t\t\t) {\r\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField;\r\n\t\t\t} else {\r\n\t\t\t\tfieldGroups.push({ first: newField });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst fs = fieldGroups.map((fg, i) => {\r\n\t\t\tif (fg.only) {\r\n\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid);\r\n\t\t\t}\r\n\r\n\t\t\tconst first = fg.first\r\n\t\t\t\t? this.renderField(fg.first, _.get(values, fg.first.name), !valid)\r\n\t\t\t\t: null;\r\n\t\t\tconst second = fg.second\r\n\t\t\t\t? this.renderField(fg.second, _.get(values, fg.second.name), !valid)\r\n\t\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Group key={i} widths=\"equal\">\r\n\t\t\t\t\t{first}\r\n\t\t\t\t\t{second}\r\n\t\t\t\t</Form.Group>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Accordion styled fluid>\r\n\t\t\t\t<Accordion.Title active={this.state.open} onClick={this.handleClick}>\r\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\r\n\t\t\t\t</Accordion.Title>\r\n\r\n\t\t\t\t<Accordion.Content active={this.state.open}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t{fs}\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t\tvisible={!valid}\r\n\t\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Accordion.Content>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate renderField(\r\n\t\tfield: DataFieldRaw<T>,\r\n\t\tvalue: string | string[],\r\n\t\terror: boolean\r\n\t) {\r\n\t\tif (typeof field.filter === 'function') {\r\n\t\t\treturn field.filter({\r\n\t\t\t\tstate: this.props.values,\r\n\t\t\t\tsetState: this.setState,\r\n\t\t\t\thandleChange: this.handleChange,\r\n\t\t\t\tvalue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (field.options) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tvalue = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={field.name}\r\n\t\t\t\t\tlabel={field.label}\r\n\t\t\t\t\tplaceholder={field.label}\r\n\t\t\t\t\toptions={field.options}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={field.name}\r\n\t\t\t\ttype={field.type ? field.type : 'text'}\r\n\t\t\t\tlabel={field.label}\r\n\t\t\t\tplaceholder={field.label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\terror={error}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FilterForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx"],"sourceRoot":""}