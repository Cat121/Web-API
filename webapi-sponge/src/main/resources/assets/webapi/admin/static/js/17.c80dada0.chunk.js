webpackJsonp([17],{854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85),o=(n.n(r),n(0)),i=(n.n(o),n(62)),a=n(63),s=n(44),p=n(207),c=n(868),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.showSubject=function(e){n.setState({modal:!0,subject:e})},n.toggleModal=function(){n.setState({modal:!n.state.modal})},n.state={modal:!1,filter:""},n.onTabChange=n.onTabChange.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){this.props.requestCollections()},t.prototype.onTabChange=function(e,t){if(t.activeIndex||0===t.activeIndex){var n=this.props.collections[t.activeIndex];this.props.requestSubjects(n)}},t.prototype.render=function(){var e=this,t=this.props.t,n=this.state.subject,i=this.props.collections.map(function(n){return{menuItem:o.createElement(s.n.Item,{key:n.id},r.upperFirst(n.id),o.createElement(s.k,null,n.loadedSubjectCount)),render:function(){var n={id:{name:"id",label:t("Id"),view:!0},friendlyId:{name:"friendlyId",label:t("Name"),view:!0},permissions:{name:"permissions",label:t("Permissions"),view:function(n){if(!n.permissions||!Object.keys(n.permissions).length)return t("No permissions");return o.createElement(s.b,{primary:!0,content:"View",onClick:function(){return e.showSubject(n)}})}}},r=function(){return!1};return o.createElement(s.t,{basic:!0},o.createElement(c.a,{list:e.props.subjects,idFunc:function(e){return e.id},isEditing:r,canEdit:r,canDelete:r,fields:n}))}}});return o.createElement(s.t,{basic:!0},o.createElement(s.v,{defaultActiveIndex:-1,onTabChange:this.onTabChange,menu:{secondary:!0,pointing:!0},panes:i}),this.renderSubject(n))},t.prototype.renderSubject=function(e){var t=this;if(!e||!e.permissions)return null;var n=this.props.t,r=Object.keys(e.permissions).filter(function(e){return e.indexOf(t.state.filter)>=0}).map(function(t){return o.createElement(s.w.Row,{key:t},o.createElement(s.w.Cell,null,t),o.createElement(s.w.Cell,null,o.createElement(s.h,{color:e.permissions[t]?"green":"red",name:e.permissions[t]?"check":"delete"})))});return o.createElement(s.p,{open:this.state.modal,onClose:this.toggleModal,size:"fullscreen",className:"scrolling"},o.createElement(s.p.Header,null,o.createElement(i.a,{i18nKey:"GameRulesTitle"},"Permissions for '",e.id,"'")),o.createElement(s.p.Content,null,o.createElement(s.j,{type:"text",placeholder:"Filter...",value:this.state.filter,onChange:function(e,n){return t.setState({filter:n.value})}}),o.createElement(s.w,{basic:!0,compact:!0},o.createElement(s.w.Body,null,r))),o.createElement(s.p.Actions,null,o.createElement(s.b,{primary:!0,onClick:this.toggleModal},n("OK"))))},t}(o.Component);t.default=Object(a.b)(function(e){return{collections:e.permission.collections,subjects:e.permission.subjects}},function(e){return{requestCollections:function(){return e(Object(p.b)())},requestSubjects:function(t){return e(Object(p.c)(t))}}})(Object(i.c)("Permissions")(u))},868:function(e,t,n){"use strict";var r=n(85),o=(n.n(r),n(0)),i=(n.n(o),n(62)),a=n(44),s=n(203),p=n(135),c=n(869),l=n(870),u=n(871),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=function(e){function t(t){var n=e.call(this,t)||this;return n.changePage=function(e,t){e.preventDefault(),n.setState({page:t})},n.onEdit=function(e,t){var o={};e&&Object.keys(n.props.fields).forEach(function(t){n.props.fields[t].edit&&(o[t]=r.get(e,t))}),n.setState({newData:o}),n.props.onEdit&&n.props.onEdit(e,t)},n.state={page:0,newData:{}},n.changePage=n.changePage.bind(n),n.doHandleChange=n.doHandleChange.bind(n),n.handleChange=p.f.bind(n,n.doHandleChange),n}return d(t,e),t.prototype.doHandleChange=function(e,t){var n;this.setState({newData:h({},this.state.newData,(n={},n[e]=t,n))})},t.prototype.shouldComponentUpdate=function(e,t){return e.fields!==this.props.fields||e.list!==this.props.list||t.page!==this.state.page||t.newData!==this.state.newData},t.prototype.render=function(){var e=this,t=this.props,n=t.list,i=t.canEdit,p=t.canDelete,u=t.actions,d=Object.keys(this.props.fields).map(function(t){return e.props.fields[t]}).filter(function(e){return e.view}),h=Math.ceil(n.length/20),f=Math.min(this.state.page,h-1),m=this.props.t,g=this.props.tReady,y=r.some(n,i),b=r.some(n,p);return o.createElement("div",{style:{marginTop:"2em"}},this.renderHeader(),o.createElement(a.w,{striped:!0,stackable:!0},o.createElement(l.a,{fields:d,hasActions:"undefined"!==typeof u,canEdit:y,canDelete:b,i18n:s.a,t:m,tReady:g}),o.createElement(a.w.Body,null,this.renderRows(d,f))),o.createElement(c.a,{page:f,maxPage:h,changePage:this.changePage}))},t.prototype.renderHeader=function(){var e=this.props,t=e.icon,n=e.title;return n?o.createElement(a.g,null,o.createElement(a.h,{fitted:!0,name:t})," ",n):null},t.prototype.renderRows=function(e,t){var n=this,i=this.props,a=i.list,p=i.canEdit,c=i.canDelete,l=i.actions,d=i.t,f=i.tReady,m=a.slice(20*t,20*(t+1)),g={handleChange:this.handleChange,state:this.state.newData,setState:function(e){return n.setState({newData:h({},n.state.newData,e)})}},y=r.some(a,p),b=r.some(a,c);return m.map(function(t,r){return o.createElement(u.a,{key:n.props.idFunc(t),obj:t,tableRef:g,actionable:y||b,canEdit:p,canDelete:c,editing:n.props.isEditing(t),fields:e,onEdit:n.onEdit,onSave:n.props.onSave,onDelete:n.props.onDelete,actions:l,newData:n.state.newData,handleChange:n.handleChange,i18n:s.a,t:d,tReady:f})})},t}(o.Component);t.a=Object(i.c)("DataTable")(f)},869:function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(44)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.page!==this.props.page||e.maxPage!==this.props.maxPage},t.prototype.render=function(){return this.props.maxPage<=1?null:r.createElement(o.n,{pagination:!0},this.renderFirst(),this.renderPrevMore(),this.renderMain(),this.renderNextMore(),this.renderLast())},t.prototype.renderFirst=function(){var e=this;return this.props.page<=4?null:r.createElement(o.n.Item,{onClick:function(t){return e.props.changePage(t,0)}},"1")},t.prototype.renderPrevMore=function(){var e=this;return this.props.page<=5?null:r.createElement(o.n.Item,{onClick:function(t){return e.props.changePage(t,e.props.page-5)}},"...")},t.prototype.renderMain=function(){for(var e=this,t=this.props,n=t.page,i=t.maxPage,a=Math.max(0,n-4),s=Math.min(i,n+5),p=[],c=a;c<s;c++)p.push(c);return p.map(function(t){return r.createElement(o.n.Item,{key:t,onClick:function(n){return e.props.changePage(n,t)},active:t===n},t+1)})},t.prototype.renderNextMore=function(){var e=this;return this.props.page>=this.props.maxPage-6?null:r.createElement(o.n.Item,{onClick:function(t){return e.props.changePage(t,e.props.page+5)}},"...")},t.prototype.renderLast=function(){var e=this;return this.props.page>=this.props.maxPage-5?null:r.createElement(o.n.Item,{onClick:function(t){return e.props.changePage(t,e.props.maxPage-1)}},this.props.maxPage)},t}(r.Component);t.a=a},870:function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(44)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.fields!==this.props.fields},t.prototype.render=function(){return r.createElement(o.w.Header,null,r.createElement(o.w.Row,null,this.renderFields(),this.renderActions()))},t.prototype.renderFields=function(){var e=this;return Object.keys(this.props.fields).map(function(t){var n=e.props.fields[t];return r.createElement(o.w.HeaderCell,{key:t},n.label?n.label:"<"+n.name+">")})},t.prototype.renderActions=function(){return this.props.hasActions||this.props.canEdit||this.props.canDelete?r.createElement(o.w.HeaderCell,null,this.props.t("Actions")):null},t}(r.Component);t.a=a},871:function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(44)),i=n(135),a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSave=function(){var e=t.props,n=e.obj,r=e.tableRef;t.props.onSave&&t.props.onSave(n,t.props.newData,r)},t.onEditEmpty=function(){t.props.onEdit(void 0,t.props.tableRef)},t.onEdit=function(){t.props.onEdit(t.props.obj,t.props.tableRef)},t.onDelete=function(){t.props.onDelete&&t.props.onDelete(t.props.obj,t.props.tableRef)},t}return a(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.obj!==this.props.obj||e.editing!==this.props.editing||e.fields!==this.props.fields||this.props.editing&&e.newData!==this.props.newData},t.prototype.render=function(){return r.createElement(o.w.Row,null,this.renderFields(),this.renderActions())},t.prototype.renderFields=function(){var e=this;return this.props.fields.map(function(t,n){return r.createElement(o.w.Cell,{key:n,collapsing:!t.wide},e.renderField(t))})},t.prototype.renderField=function(e){var t=this.props,n=t.obj,r=t.editing,o=t.tableRef;return e.edit&&r?"function"===typeof e.edit?e.edit(n,o):this.renderEdit(n,e):"function"===typeof e.view?e.view(n,o):Object(i.e)(n,e.name)},t.prototype.renderEdit=function(e,t){return t.options?r.createElement(o.e.Field,{fluid:!0,selection:!0,search:!0,control:o.d,name:t.name,placeholder:t.label,options:t.options,value:this.props.newData[t.name],onChange:this.props.handleChange}):r.createElement(o.e.Input,{name:t.name,type:t.type?t.type:"text",placeholder:t.label,value:this.props.newData[t.name],onChange:this.props.handleChange})},t.prototype.renderActions=function(){var e=this.props,t=e.actions,n=e.obj,i=e.actionable,a=e.canEdit,s=e.canDelete,p=e.editing,c=e.tableRef,l="function"===typeof a?a(n):a,u="function"===typeof s?s(n):a;if(!t&&!i)return null;var d=null;l&&p?d=r.createElement(o.w.Cell,{collapsing:!0},r.createElement(o.b,{primary:!0,disabled:n.updating,loading:n.updating,onClick:this.onSave},r.createElement(o.h,{name:"save"})," ",this.props.t("Save")),r.createElement(o.b,{secondary:!0,disabled:n.updating,loading:n.updating,onClick:this.onEditEmpty},r.createElement(o.h,{name:"cancel"})," ",this.props.t("Cancel"))):l&&(d=r.createElement(o.w.Cell,{collapsing:!0},r.createElement(o.b,{primary:!0,disabled:n.updating,loading:n.updating,onClick:this.onEdit},r.createElement(o.h,{name:"edit"})," ",this.props.t("Edit"))));var h=null;return u&&(h=r.createElement(o.b,{negative:!0,disabled:n.updating,loading:n.updating,onClick:this.onDelete},r.createElement(o.h,{name:"trash"})," ",this.props.t("Remove"))),r.createElement(o.w.Cell,{collapsing:!0},d,h,t?t(n,c):null)},t}(r.Component);t.a=s}});
//# sourceMappingURL=17.c80dada0.chunk.js.map